<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PorcDocs: G:/Workspace/Porcupine/ProjectPorcupine/Assets/Scripts/Utilities/Priority_Queue/Priority Queue/FastPriorityQueue.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PorcDocs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_fast_priority_queue_8cs_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FastPriorityQueue.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_fast_priority_queue_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// &lt;auto-generated/&gt;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#undef DEBUG</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="_simple_priority_queue_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Runtime.CompilerServices;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="namespace_priority___queue.html">    9</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_priority___queue.html">Priority_Queue</a></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html">   16</a></span>&#160;    <span class="keyword">public</span> sealed <span class="keyword">class </span><a class="code" href="class_priority___queue_1_1_fast_priority_queue.html">FastPriorityQueue</a>&lt;T&gt; : <a class="code" href="interface_priority___queue_1_1_i_priority_queue.html">IPriorityQueue</a>&lt;T&gt;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        where T : FastPriorityQueueNode</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    {</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">int</span> _numNodes;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;        <span class="keyword">private</span> T[] _nodes;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">long</span> _numNodesEverEnqueued;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#a9b36491841ecaf15f8253a14a4050e0b">   27</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a9b36491841ecaf15f8253a14a4050e0b">FastPriorityQueue</a>(<span class="keywordtype">int</span> maxNodes)</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">            #if DEBUG</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            <span class="keywordflow">if</span> (maxNodes &lt;= 0)</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;New queue size cannot be smaller than 1&quot;</span>);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            }</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">            #endif</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            _numNodes = 0;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            _nodes = <span class="keyword">new</span> T[maxNodes + 1];</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            _numNodesEverEnqueued = 0;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        }</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ae439e87d078e219b8bcd8fa59f3b5750">Count</a></div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#ae439e87d078e219b8bcd8fa59f3b5750">   46</a></span>&#160;        {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="keyword">get</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                <span class="keywordflow">return</span> _numNodes;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            }</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a1dc8784035e6432aa2851a5251cb72bf">MaxSize</a></div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#a1dc8784035e6432aa2851a5251cb72bf">   58</a></span>&#160;        {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keyword">get</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                <span class="keywordflow">return</span> _nodes.Length - 1;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">        #if NET_VERSION_4_5</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#a2e6712e62f3f64596884f35d6fec4441">   72</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a2e6712e62f3f64596884f35d6fec4441">Clear</a>()</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            Array.Clear(_nodes, 1, _numNodes);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            _numNodes = 0;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">        #if NET_VERSION_4_5</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#ac7ed1c55afc22b9f492576675d0651c7">   84</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ac7ed1c55afc22b9f492576675d0651c7">Contains</a>(T node)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">            #if DEBUG</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordflow">if</span>(node == null)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;node&quot;</span>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">if</span>(node.QueueIndex &lt; 0 || node.QueueIndex &gt;= _nodes.Length)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;node.QueueIndex has been corrupted. Did you change it manually? Or add this node to another queue?&quot;</span>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">            #endif</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keywordflow">return</span> (_nodes[node.QueueIndex] == node);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">        #if NET_VERSION_4_5</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#a9338584620111d3a2f0dc429e197be1a">  109</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a9338584620111d3a2f0dc429e197be1a">Enqueue</a>(T node, <span class="keywordtype">double</span> priority)</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">            #if DEBUG</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="keywordflow">if</span>(node == null)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;node&quot;</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">if</span>(_numNodes &gt;= _nodes.Length - 1)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Queue is full - node cannot be added: &quot;</span> + node);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ac7ed1c55afc22b9f492576675d0651c7">Contains</a>(node))</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Node is already enqueued: &quot;</span> + node);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">            #endif</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            node.Priority = priority;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            _numNodes++;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            _nodes[_numNodes] = node;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            node.QueueIndex = _numNodes;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            node.InsertionIndex = _numNodesEverEnqueued++;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            CascadeUp(_nodes[_numNodes]);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">        #if NET_VERSION_4_5</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> Swap(T node1, T node2)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="comment">//Swap the nodes</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            _nodes[node1.QueueIndex] = node2;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            _nodes[node2.QueueIndex] = node1;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="comment">//Swap their indices</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordtype">int</span> temp = node1.QueueIndex;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            node1.QueueIndex = node2.QueueIndex;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            node2.QueueIndex = temp;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">//Performance appears to be slightly better when this is NOT inlined o_O</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> CascadeUp(T node)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="comment">//aka Heapify-up</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordtype">int</span> parent = node.QueueIndex / 2;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">while</span>(parent &gt;= 1)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                T parentNode = _nodes[parent];</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">if</span>(HasHigherPriority(parentNode, node))</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="comment">//Node has lower priority value, so move it up the heap</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                Swap(node, parentNode); <span class="comment">//For some reason, this is faster with Swap() rather than (less..?) individual operations, like in CascadeDown()</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                parent = node.QueueIndex / 2;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">        #if NET_VERSION_4_5</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> CascadeDown(T node)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="comment">//aka Heapify-down</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            T newParent;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordtype">int</span> finalQueueIndex = node.QueueIndex;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                newParent = node;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordtype">int</span> childLeftIndex = 2 * finalQueueIndex;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="comment">//Check if the left-child is higher-priority than the current node</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordflow">if</span>(childLeftIndex &gt; _numNodes)</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <span class="comment">//This could be placed outside the loop, but then we&#39;d have to check newParent != node twice</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    node.QueueIndex = finalQueueIndex;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    _nodes[finalQueueIndex] = node;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                T childLeft = _nodes[childLeftIndex];</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="keywordflow">if</span>(HasHigherPriority(childLeft, newParent))</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    newParent = childLeft;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="comment">//Check if the right-child is higher-priority than either the current node or the left child</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="keywordtype">int</span> childRightIndex = childLeftIndex + 1;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">if</span>(childRightIndex &lt;= _numNodes)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    T childRight = _nodes[childRightIndex];</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    <span class="keywordflow">if</span>(HasHigherPriority(childRight, newParent))</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        newParent = childRight;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                <span class="comment">//If either of the children has higher (smaller) priority, swap and continue cascading</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">if</span>(newParent != node)</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    <span class="comment">//Move new parent to its new index.  node will be moved once, at the end</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    <span class="comment">//Doing it this way is one less assignment operation than calling Swap()</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    _nodes[finalQueueIndex] = newParent;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    <span class="keywordtype">int</span> temp = newParent.QueueIndex;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    newParent.QueueIndex = finalQueueIndex;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    finalQueueIndex = temp;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    <span class="comment">//See note above</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    node.QueueIndex = finalQueueIndex;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    _nodes[finalQueueIndex] = node;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">        #if NET_VERSION_4_5</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> HasHigherPriority(T higher, T lower)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">return</span> (higher.Priority &lt; lower.Priority ||</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                (higher.Priority == lower.Priority &amp;&amp; higher.InsertionIndex &gt; lower.InsertionIndex));</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#ac1b1d19f0769e01956cdcb1fbd5f08ac">  245</a></span>&#160;        <span class="keyword">public</span> T <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ac1b1d19f0769e01956cdcb1fbd5f08ac">Dequeue</a>()</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">            #if DEBUG</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">if</span>(_numNodes &lt;= 0)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot call Dequeue() on an empty queue&quot;</span>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ae0ac5139a5b545e75808a4173a8777d6">IsValidQueue</a>())</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Queue has been corrupted (Did you update a node priority manually instead of calling UpdatePriority()?&quot;</span> +</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                                    <span class="stringliteral">&quot;Or add the same node to two different queues?)&quot;</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">            #endif</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            T returnMe = _nodes[1];</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ac4b7f14c5114cc676537d80168679698">Remove</a>(returnMe);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">return</span> returnMe;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#a6e765b7a118ec3c56a092a058ec987c1">  270</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a6e765b7a118ec3c56a092a058ec987c1">Resize</a>(<span class="keywordtype">int</span> maxNodes)</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">            #if DEBUG</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">if</span> (maxNodes &lt;= 0)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Queue size cannot be smaller than 1&quot;</span>);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordflow">if</span> (maxNodes &lt; _numNodes)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Called Resize(&quot;</span> + maxNodes + <span class="stringliteral">&quot;), but current queue contains &quot;</span> + _numNodes + <span class="stringliteral">&quot; nodes&quot;</span>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">            #endif</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            T[] newArray = <span class="keyword">new</span> T[maxNodes + 1];</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordtype">int</span> highestIndexToCopy = Math.Min(maxNodes, _numNodes);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= highestIndexToCopy; i++)</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                newArray[i] = _nodes[i];</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            _nodes = newArray;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keyword">public</span> T <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ada99ea4007e6af6c84660d088bb054fc">First</a></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#ada99ea4007e6af6c84660d088bb054fc">  299</a></span>&#160;        {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keyword">get</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">                #if DEBUG</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="keywordflow">if</span>(_numNodes &lt;= 0)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot call .First on an empty queue&quot;</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">                #endif</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="keywordflow">return</span> _nodes[1];</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">        #if NET_VERSION_4_5</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#a6a264392ba7d522df490170facc1f252">  322</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a6a264392ba7d522df490170facc1f252">UpdatePriority</a>(T node, <span class="keywordtype">double</span> priority)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">            #if DEBUG</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">if</span>(node == null)</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;node&quot;</span>);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ac7ed1c55afc22b9f492576675d0651c7">Contains</a>(node))</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot call UpdatePriority() on a node which is not enqueued: &quot;</span> + node);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">            #endif</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            node.Priority = priority;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            OnNodeUpdated(node);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> OnNodeUpdated(T node)</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="comment">//Bubble the updated node up or down as appropriate</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordtype">int</span> parentIndex = node.QueueIndex / 2;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            T parentNode = _nodes[parentIndex];</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span>(parentIndex &gt; 0 &amp;&amp; HasHigherPriority(node, parentNode))</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                CascadeUp(node);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="comment">//Note that CascadeDown will be called if parentNode == node (that is, node is the root)</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                CascadeDown(node);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#ac4b7f14c5114cc676537d80168679698">  361</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ac4b7f14c5114cc676537d80168679698">Remove</a>(T node)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="preprocessor">            #if DEBUG</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">if</span>(node == null)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;node&quot;</span>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            }</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ac7ed1c55afc22b9f492576675d0651c7">Contains</a>(node))</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;Cannot call Remove() on a node which is not enqueued: &quot;</span> + node);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">            #endif</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="comment">//If the node is already the last node, we can remove it immediately</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">if</span>(node.QueueIndex == _numNodes)</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                _nodes[_numNodes] = null;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                _numNodes--;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="comment">//Swap the node with the last node</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            T formerLastNode = _nodes[_numNodes];</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            Swap(node, formerLastNode);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            _nodes[_numNodes] = null;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            _numNodes--;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="comment">//Now bubble formerLastNode (which is no longer the last node) up or down as appropriate</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            OnNodeUpdated(formerLastNode);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#a6bc93c974be3bd97fbce99478a2bca46">  392</a></span>&#160;        <span class="keyword">public</span> IEnumerator&lt;T&gt; <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a6bc93c974be3bd97fbce99478a2bca46">GetEnumerator</a>()</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt;= _numNodes; i++)</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                yield <span class="keywordflow">return</span> _nodes[i];</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        IEnumerator IEnumerable.GetEnumerator()</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#a6bc93c974be3bd97fbce99478a2bca46">GetEnumerator</a>();</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="class_priority___queue_1_1_fast_priority_queue.html#ae0ac5139a5b545e75808a4173a8777d6">  407</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_priority___queue_1_1_fast_priority_queue.html#ae0ac5139a5b545e75808a4173a8777d6">IsValidQueue</a>()</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; _nodes.Length; i++)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">if</span>(_nodes[i] != null)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    <span class="keywordtype">int</span> childLeftIndex = 2 * i;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    <span class="keywordflow">if</span>(childLeftIndex &lt; _nodes.Length &amp;&amp; _nodes[childLeftIndex] != null &amp;&amp; HasHigherPriority(_nodes[childLeftIndex], _nodes[i]))</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    <span class="keywordtype">int</span> childRightIndex = childLeftIndex + 1;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    <span class="keywordflow">if</span>(childRightIndex &lt; _nodes.Length &amp;&amp; _nodes[childRightIndex] != null &amp;&amp; HasHigherPriority(_nodes[childRightIndex], _nodes[i]))</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_ada99ea4007e6af6c84660d088bb054fc"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#ada99ea4007e6af6c84660d088bb054fc">Priority_Queue.FastPriorityQueue.First</a></div><div class="ttdeci">T First</div><div class="ttdoc">Returns the head of the queue, without removing it (use Dequeue() for that). If the queue is empty...</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00299">FastPriorityQueue.cs:299</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_ae0ac5139a5b545e75808a4173a8777d6"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#ae0ac5139a5b545e75808a4173a8777d6">Priority_Queue.FastPriorityQueue.IsValidQueue</a></div><div class="ttdeci">bool IsValidQueue()</div><div class="ttdoc">Should not be called in production code. Checks to make sure the queue is still in a valid state...</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00407">FastPriorityQueue.cs:407</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_a6e765b7a118ec3c56a092a058ec987c1"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#a6e765b7a118ec3c56a092a058ec987c1">Priority_Queue.FastPriorityQueue.Resize</a></div><div class="ttdeci">void Resize(int maxNodes)</div><div class="ttdoc">Resize the queue so it can accept more nodes. All currently enqueued nodes are remain. Attempting to decrease the queue size to a size too small to hold the existing nodes results in undefined behavior O(n) </div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00270">FastPriorityQueue.cs:270</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_ac4b7f14c5114cc676537d80168679698"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#ac4b7f14c5114cc676537d80168679698">Priority_Queue.FastPriorityQueue.Remove</a></div><div class="ttdeci">void Remove(T node)</div><div class="ttdoc">Removes a node from the queue. The node does not need to be the head of the queue. If the node is not in the queue, the result is undefined. If unsure, check Contains() first O(log n) </div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00361">FastPriorityQueue.cs:361</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_a9b36491841ecaf15f8253a14a4050e0b"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#a9b36491841ecaf15f8253a14a4050e0b">Priority_Queue.FastPriorityQueue.FastPriorityQueue</a></div><div class="ttdeci">FastPriorityQueue(int maxNodes)</div><div class="ttdoc">Instantiate a new Priority Queue </div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00027">FastPriorityQueue.cs:27</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_a6a264392ba7d522df490170facc1f252"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#a6a264392ba7d522df490170facc1f252">Priority_Queue.FastPriorityQueue.UpdatePriority</a></div><div class="ttdeci">void UpdatePriority(T node, double priority)</div><div class="ttdoc">This method must be called on a node every time its priority changes while it is in the queue...</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00322">FastPriorityQueue.cs:322</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_a2e6712e62f3f64596884f35d6fec4441"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#a2e6712e62f3f64596884f35d6fec4441">Priority_Queue.FastPriorityQueue.Clear</a></div><div class="ttdeci">void Clear()</div><div class="ttdoc">Removes every node from the queue. O(n) (So, don&amp;#39;t do this often!) </div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00072">FastPriorityQueue.cs:72</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_a1dc8784035e6432aa2851a5251cb72bf"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#a1dc8784035e6432aa2851a5251cb72bf">Priority_Queue.FastPriorityQueue.MaxSize</a></div><div class="ttdeci">int MaxSize</div><div class="ttdoc">Returns the maximum number of items that can be enqueued at once in this queue. Once you hit this num...</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00058">FastPriorityQueue.cs:58</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_ac7ed1c55afc22b9f492576675d0651c7"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#ac7ed1c55afc22b9f492576675d0651c7">Priority_Queue.FastPriorityQueue.Contains</a></div><div class="ttdeci">bool Contains(T node)</div><div class="ttdoc">Returns (in O(1)!) whether the given node is in the queue. O(1) </div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00084">FastPriorityQueue.cs:84</a></div></div>
<div class="ttc" id="_simple_priority_queue_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_simple_priority_queue_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">﻿using System</div><div class="ttdef"><b>Definition:</b> <a href="_simple_priority_queue_8cs_source.html#l00002">SimplePriorityQueue.cs:2</a></div></div>
<div class="ttc" id="interface_priority___queue_1_1_i_priority_queue_html"><div class="ttname"><a href="interface_priority___queue_1_1_i_priority_queue.html">Priority_Queue.IPriorityQueue</a></div><div class="ttdoc">The IPriorityQueue interface. This is mainly here for purists, and in case I decide to add more imple...</div><div class="ttdef"><b>Definition:</b> <a href="_i_priority_queue_8cs_source.html#l00011">IPriorityQueue.cs:11</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html">Priority_Queue.FastPriorityQueue</a></div><div class="ttdoc">An implementation of a min-Priority Queue using a heap. Has O(1) .Contains()! See https://github...</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00016">FastPriorityQueue.cs:16</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_ae439e87d078e219b8bcd8fa59f3b5750"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#ae439e87d078e219b8bcd8fa59f3b5750">Priority_Queue.FastPriorityQueue.Count</a></div><div class="ttdeci">int Count</div><div class="ttdoc">Returns the number of nodes in the queue. O(1) </div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00046">FastPriorityQueue.cs:46</a></div></div>
<div class="ttc" id="namespace_priority___queue_html"><div class="ttname"><a href="namespace_priority___queue.html">Priority_Queue</a></div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00009">FastPriorityQueue.cs:9</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_a9338584620111d3a2f0dc429e197be1a"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#a9338584620111d3a2f0dc429e197be1a">Priority_Queue.FastPriorityQueue.Enqueue</a></div><div class="ttdeci">void Enqueue(T node, double priority)</div><div class="ttdoc">Enqueue a node to the priority queue. Lower values are placed in front. Ties are broken by first-in-f...</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00109">FastPriorityQueue.cs:109</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_a6bc93c974be3bd97fbce99478a2bca46"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#a6bc93c974be3bd97fbce99478a2bca46">Priority_Queue.FastPriorityQueue.GetEnumerator</a></div><div class="ttdeci">IEnumerator&lt; T &gt; GetEnumerator()</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00392">FastPriorityQueue.cs:392</a></div></div>
<div class="ttc" id="class_priority___queue_1_1_fast_priority_queue_html_ac1b1d19f0769e01956cdcb1fbd5f08ac"><div class="ttname"><a href="class_priority___queue_1_1_fast_priority_queue.html#ac1b1d19f0769e01956cdcb1fbd5f08ac">Priority_Queue.FastPriorityQueue.Dequeue</a></div><div class="ttdeci">T Dequeue()</div><div class="ttdoc">Removes the head of the queue (node with minimum priority; ties are broken by order of insertion)...</div><div class="ttdef"><b>Definition:</b> <a href="_fast_priority_queue_8cs_source.html#l00245">FastPriorityQueue.cs:245</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f243a7a7d497212ea32570f02ce73440.html">Workspace</a></li><li class="navelem"><a class="el" href="dir_92ac071e2590783cb7caca7d9b628033.html">Porcupine</a></li><li class="navelem"><a class="el" href="dir_7104a0e4e3bd57a4d9b588bf838dfe29.html">ProjectPorcupine</a></li><li class="navelem"><a class="el" href="dir_173c24a531980a642061a24f61ed097f.html">Assets</a></li><li class="navelem"><a class="el" href="dir_d1fe990f965bc777ac4b048ee0a5896b.html">Scripts</a></li><li class="navelem"><a class="el" href="dir_39cb31c068d2e5535304a151a6ff0164.html">Utilities</a></li><li class="navelem"><a class="el" href="dir_0e1003dafefaec937ef39a63145c559b.html">Priority_Queue</a></li><li class="navelem"><a class="el" href="dir_c8c91fb6613c7e190e4114c29638d71d.html">Priority Queue</a></li><li class="navelem"><a class="el" href="_fast_priority_queue_8cs.html">FastPriorityQueue.cs</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
