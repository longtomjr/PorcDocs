<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PorcDocs: G:/Workspace/Porcupine/ProjectPorcupine/Assets/Scripts/Models/Trade/Trade.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PorcDocs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_trade_8cs_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Trade.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_trade_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#region License</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// ====================================================</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Project Porcupine Copyright(C) 2016 Team Porcupine</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// This program comes with ABSOLUTELY NO WARRANTY; This is free software, </span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// and you are welcome to redistribute it under certain conditions; See </span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// file LICENSE, which is part of this source code package, for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// ====================================================</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#endregion</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Linq;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="class_trade.html">   12</a></span>&#160;<span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_trade.html">Trade</a></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;{</div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="class_trade.html#acc717b21584feecc94ecec3193063978">   14</a></span>&#160;    <span class="keyword">public</span> List&lt;TradeItem&gt; <a class="code" href="class_trade.html#acc717b21584feecc94ecec3193063978">TradeItems</a>;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="class_trade.html#aa0a7026f96034e12f9e5f091fecc0f7a">   16</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_trader.html">Trader</a> <a class="code" href="class_trade.html#aa0a7026f96034e12f9e5f091fecc0f7a">Player</a>;</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="class_trade.html#af15be18bc46b24eb2e8dd2b434f324ad">   17</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_trader.html">Trader</a> <a class="code" href="class_trade.html#af15be18bc46b24eb2e8dd2b434f324ad">Trader</a>;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="class_trade.html#a6c33a0460eeb227454ca5796694ca377">   24</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_trade.html#a6c33a0460eeb227454ca5796694ca377">Trade</a>(Trader player, Trader trader)</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    {</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        Player = player;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        Trader = trader;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        List&lt;Inventory&gt; totalStock = <span class="keyword">new</span> List&lt;Inventory&gt;();</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        totalStock.AddRange(player.<a class="code" href="class_trader.html#a27280f5dd966850da20e9bc28ccb1c88">Stock</a>);</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        totalStock.AddRange(trader.<a class="code" href="class_trader.html#a27280f5dd966850da20e9bc28ccb1c88">Stock</a>);</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        TradeItems = totalStock.GroupBy(s =&gt; s.Type).Select(g =&gt; <span class="keyword">new</span> <a class="code" href="class_trade_item.html">TradeItem</a></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            Type = g.Key,</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            BaseItemPrice = g.First().BasePrice,</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            PlayerStock = player.<a class="code" href="class_trader.html#a27280f5dd966850da20e9bc28ccb1c88">Stock</a>.Where(s =&gt; s.Type == g.Key).Sum(s =&gt; s.StackSize),</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            TraderStock = trader.<a class="code" href="class_trader.html#a27280f5dd966850da20e9bc28ccb1c88">Stock</a>.Where(s =&gt; s.Type == g.Key).Sum(s =&gt; s.StackSize),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            TradeAmount = 0,</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            PlayerSellItemPrice = g.First().BasePrice * player.<a class="code" href="class_trader.html#a21872d21fd0f4e201f62bc97d21501e1">SaleMarginMultiplier</a>,</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            TraderSellItemPrice = g.First().BasePrice * trader.<a class="code" href="class_trader.html#a21872d21fd0f4e201f62bc97d21501e1">SaleMarginMultiplier</a></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        }).ToList();</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    }</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code" href="class_trade.html#aaba340cfdb727fe90d16a43fb3ebe3ae">TradeCurrencyBalanceForPlayer</a></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="class_trade.html#aaba340cfdb727fe90d16a43fb3ebe3ae">   50</a></span>&#160;    {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keyword">get</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <span class="keywordflow">return</span> TradeItems.Sum(i =&gt; i.TradeCurrencyBalanceForPlayer);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="class_trade.html#aecd1f04d634f477fa7325a618d33a066">   61</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_trade.html#aecd1f04d634f477fa7325a618d33a066">IsValid</a>()</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_trade.html#aaba340cfdb727fe90d16a43fb3ebe3ae">TradeCurrencyBalanceForPlayer</a> &lt; 0</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            ? Player.<a class="code" href="class_trader.html#a9f4dec66f691ba5654ea352efa5af78b">Currency</a>.<a class="code" href="class_currency.html#a6fe7cdb92b7359c5cf462d0691d69e2c">Balance</a> &gt;= -<a class="code" href="class_trade.html#aaba340cfdb727fe90d16a43fb3ebe3ae">TradeCurrencyBalanceForPlayer</a></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            : Trader.<a class="code" href="class_trader.html#a9f4dec66f691ba5654ea352efa5af78b">Currency</a>.<a class="code" href="class_currency.html#a6fe7cdb92b7359c5cf462d0691d69e2c">Balance</a> &gt;= <a class="code" href="class_trade.html#aaba340cfdb727fe90d16a43fb3ebe3ae">TradeCurrencyBalanceForPlayer</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div><div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_trade_html_acc717b21584feecc94ecec3193063978"><div class="ttname"><a href="class_trade.html#acc717b21584feecc94ecec3193063978">Trade.TradeItems</a></div><div class="ttdeci">List&lt; TradeItem &gt; TradeItems</div><div class="ttdef"><b>Definition:</b> <a href="_trade_8cs_source.html#l00014">Trade.cs:14</a></div></div>
<div class="ttc" id="class_trade_html_aaba340cfdb727fe90d16a43fb3ebe3ae"><div class="ttname"><a href="class_trade.html#aaba340cfdb727fe90d16a43fb3ebe3ae">Trade.TradeCurrencyBalanceForPlayer</a></div><div class="ttdeci">float TradeCurrencyBalanceForPlayer</div><div class="ttdoc">Current value of the deal for the player currency in the trade currency If negative, the player has to give money to complete the trade If positive, the player win money at the end of the trade. </div><div class="ttdef"><b>Definition:</b> <a href="_trade_8cs_source.html#l00050">Trade.cs:50</a></div></div>
<div class="ttc" id="class_trader_html"><div class="ttname"><a href="class_trader.html">Trader</a></div><div class="ttdef"><b>Definition:</b> <a href="_trader_8cs_source.html#l00012">Trader.cs:12</a></div></div>
<div class="ttc" id="class_trader_html_a21872d21fd0f4e201f62bc97d21501e1"><div class="ttname"><a href="class_trader.html#a21872d21fd0f4e201f62bc97d21501e1">Trader.SaleMarginMultiplier</a></div><div class="ttdeci">float SaleMarginMultiplier</div><div class="ttdef"><b>Definition:</b> <a href="_trader_8cs_source.html#l00018">Trader.cs:18</a></div></div>
<div class="ttc" id="class_trade_html_aa0a7026f96034e12f9e5f091fecc0f7a"><div class="ttname"><a href="class_trade.html#aa0a7026f96034e12f9e5f091fecc0f7a">Trade.Player</a></div><div class="ttdeci">Trader Player</div><div class="ttdef"><b>Definition:</b> <a href="_trade_8cs_source.html#l00016">Trade.cs:16</a></div></div>
<div class="ttc" id="class_trade_html_af15be18bc46b24eb2e8dd2b434f324ad"><div class="ttname"><a href="class_trade.html#af15be18bc46b24eb2e8dd2b434f324ad">Trade.Trader</a></div><div class="ttdeci">Trader Trader</div><div class="ttdef"><b>Definition:</b> <a href="_trade_8cs_source.html#l00017">Trade.cs:17</a></div></div>
<div class="ttc" id="class_trade_html_a6c33a0460eeb227454ca5796694ca377"><div class="ttname"><a href="class_trade.html#a6c33a0460eeb227454ca5796694ca377">Trade.Trade</a></div><div class="ttdeci">Trade(Trader player, Trader trader)</div><div class="ttdoc">Create a trade instance between two trader Creating a trade will scan the inventory of both trader an...</div><div class="ttdef"><b>Definition:</b> <a href="_trade_8cs_source.html#l00024">Trade.cs:24</a></div></div>
<div class="ttc" id="class_trade_item_html"><div class="ttname"><a href="class_trade_item.html">TradeItem</a></div><div class="ttdef"><b>Definition:</b> <a href="_trade_item_8cs_source.html#l00011">TradeItem.cs:11</a></div></div>
<div class="ttc" id="class_trade_html"><div class="ttname"><a href="class_trade.html">Trade</a></div><div class="ttdef"><b>Definition:</b> <a href="_trade_8cs_source.html#l00012">Trade.cs:12</a></div></div>
<div class="ttc" id="class_trader_html_a27280f5dd966850da20e9bc28ccb1c88"><div class="ttname"><a href="class_trader.html#a27280f5dd966850da20e9bc28ccb1c88">Trader.Stock</a></div><div class="ttdeci">List&lt; Inventory &gt; Stock</div><div class="ttdef"><b>Definition:</b> <a href="_trader_8cs_source.html#l00020">Trader.cs:20</a></div></div>
<div class="ttc" id="class_trader_html_a9f4dec66f691ba5654ea352efa5af78b"><div class="ttname"><a href="class_trader.html#a9f4dec66f691ba5654ea352efa5af78b">Trader.Currency</a></div><div class="ttdeci">Currency Currency</div><div class="ttdef"><b>Definition:</b> <a href="_trader_8cs_source.html#l00016">Trader.cs:16</a></div></div>
<div class="ttc" id="class_trade_html_aecd1f04d634f477fa7325a618d33a066"><div class="ttname"><a href="class_trade.html#aecd1f04d634f477fa7325a618d33a066">Trade.IsValid</a></div><div class="ttdeci">bool IsValid()</div><div class="ttdoc">Check if both trader in the trade have enough currency to complete the deal. </div><div class="ttdef"><b>Definition:</b> <a href="_trade_8cs_source.html#l00061">Trade.cs:61</a></div></div>
<div class="ttc" id="class_currency_html_a6fe7cdb92b7359c5cf462d0691d69e2c"><div class="ttname"><a href="class_currency.html#a6fe7cdb92b7359c5cf462d0691d69e2c">Currency.Balance</a></div><div class="ttdeci">float Balance</div><div class="ttdef"><b>Definition:</b> <a href="_currency_8cs_source.html#l00013">Currency.cs:13</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f243a7a7d497212ea32570f02ce73440.html">Workspace</a></li><li class="navelem"><a class="el" href="dir_92ac071e2590783cb7caca7d9b628033.html">Porcupine</a></li><li class="navelem"><a class="el" href="dir_7104a0e4e3bd57a4d9b588bf838dfe29.html">ProjectPorcupine</a></li><li class="navelem"><a class="el" href="dir_173c24a531980a642061a24f61ed097f.html">Assets</a></li><li class="navelem"><a class="el" href="dir_d1fe990f965bc777ac4b048ee0a5896b.html">Scripts</a></li><li class="navelem"><a class="el" href="dir_7190be0aad299c0c23b8d6d73064f5ea.html">Models</a></li><li class="navelem"><a class="el" href="dir_e068ede8a492a6395508b36b71990f9f.html">Trade</a></li><li class="navelem"><a class="el" href="_trade_8cs.html">Trade.cs</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
