<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PorcDocs: G:/Workspace/Porcupine/ProjectPorcupine/Assets/Scripts/Controllers/InputOutput/MouseController.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PorcDocs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_mouse_controller_8cs_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MouseController.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_mouse_controller_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#region License</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// ====================================================</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Project Porcupine Copyright(C) 2016 Team Porcupine</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// This program comes with ABSOLUTELY NO WARRANTY; This is free software, </span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// and you are welcome to redistribute it under certain conditions; See </span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// file LICENSE, which is part of this source code package, for details.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// ====================================================</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#endregion</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_unity_engine.html">UnityEngine</a>;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_unity_engine.html">UnityEngine</a>.EventSystems;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="class_mouse_controller.html">   13</a></span>&#160;<span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_mouse_controller.html">MouseController</a></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#ac4180c166ce9084e0f817ab7e7f930fd">   15</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_selection_info.html">SelectionInfo</a> <a class="code" href="class_mouse_controller.html#ac4180c166ce9084e0f817ab7e7f930fd">mySelection</a>;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="keyword">private</span> GameObject cursorParent;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="keyword">private</span> GameObject circleCursorPrefab;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="keyword">private</span> GameObject furnitureParent;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keyword">private</span> <a class="code" href="class_build_mode_controller.html">BuildModeController</a> buildModeController;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="keyword">private</span> <a class="code" href="class_furniture_sprite_controller.html">FurnitureSpriteController</a> furnitureSpriteController;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keyword">private</span> <a class="code" href="class_utility_sprite_controller.html">UtilitySpriteController</a> utilitySpriteController;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="comment">// The world-position of the mouse last frame.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keyword">private</span> Vector3 lastFramePosition;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keyword">private</span> Vector3 currFramePosition;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keyword">private</span> Vector3 currPlacingPosition;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// The world-position start of our left-mouse drag operation.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keyword">private</span> Vector3 dragStartPosition;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keyword">private</span> List&lt;GameObject&gt; dragPreviewGameObjects;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keyword">private</span> <a class="code" href="class_context_menu.html">ContextMenu</a> contextMenu;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keyword">private</span> <a class="code" href="class_mouse_cursor.html">MouseCursor</a> mouseCursor;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// Is dragging an area (eg. floor tiles).</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">bool</span> isDragging = <span class="keyword">false</span>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// ÃŒs panning the camera</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">bool</span> isPanning = <span class="keyword">false</span>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">float</span> panningThreshold = .015f;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">private</span> Vector3 panningMouseStart = Vector3.zero;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">private</span> <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a> currentMode = <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SELECT;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// Use this for initialization.</span></div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#a94346c229fc62e5f63bcb737181fa946">   49</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_mouse_controller.html#a94346c229fc62e5f63bcb737181fa946">MouseController</a>(<a class="code" href="class_build_mode_controller.html">BuildModeController</a> buildModeController, <a class="code" href="class_furniture_sprite_controller.html">FurnitureSpriteController</a> furnitureSpriteController, <a class="code" href="class_utility_sprite_controller.html">UtilitySpriteController</a> utilitySpriteController, GameObject cursorObject)</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        buildModeController.<a class="code" href="class_build_mode_controller.html#aeff1dc27c03ea6b305e96cd27479e4f0">SetMouseController</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        this.buildModeController = buildModeController;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        this.furnitureSpriteController = furnitureSpriteController;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        this.utilitySpriteController = utilitySpriteController;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        circleCursorPrefab = cursorObject;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        contextMenu = GameObject.FindObjectOfType&lt;<a class="code" href="class_context_menu.html">ContextMenu</a>&gt;();</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        dragPreviewGameObjects = <span class="keyword">new</span> List&lt;GameObject&gt;();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        cursorParent = <span class="keyword">new</span> GameObject(<span class="stringliteral">&quot;Cursor&quot;</span>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        mouseCursor = <span class="keyword">new</span> <a class="code" href="class_mouse_cursor.html">MouseCursor</a>(<span class="keyword">this</span>, buildModeController);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        furnitureParent = <span class="keyword">new</span> GameObject(<span class="stringliteral">&quot;Furniture Preview Sprites&quot;</span>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="class_time_manager.html">TimeManager</a>.<a class="code" href="class_time_manager.html#a8c617ca2654bfe0d219d75a1c18afaad">Instance</a>.<a class="code" href="class_time_manager.html#a084a70cfad60b39d423fe1113ae3f62f">EveryFrameNotModal</a> += (time) =&gt; <a class="code" href="class_mouse_controller.html#ac9b2f0fae750d7128123db59fe99c6d5">Update</a>();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">   65</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        SELECT,</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        BUILD,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        SPAWN_INVENTORY</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#ad6ab2c64fc9448c083bba1dcc834a642">   75</a></span>&#160;    <span class="keyword">public</span> Vector3 <a class="code" href="class_mouse_controller.html#ad6ab2c64fc9448c083bba1dcc834a642">GetMousePosition</a>()</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">return</span> currFramePosition;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#a15de1e155c9b78d28df606af2d6817dd">   80</a></span>&#160;    <span class="keyword">public</span> Vector3 <a class="code" href="class_mouse_controller.html#a15de1e155c9b78d28df606af2d6817dd">GetPlacingPosition</a>()</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span> currPlacingPosition;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#afebdeed6462eccd639e5799851597c14">   85</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a> <a class="code" href="class_mouse_controller.html#afebdeed6462eccd639e5799851597c14">GetCurrentMode</a>()</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">return</span> currentMode;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#a1cc8e4525f57977037f3cae9e70327ab">   90</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_mouse_controller.html#a1cc8e4525f57977037f3cae9e70327ab">GetIsDragging</a>()</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">return</span> isDragging;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#a8afd7ab9fc2d9768228c59250f27c3f8">   95</a></span>&#160;    <span class="keyword">public</span> List&lt;GameObject&gt; <a class="code" href="class_mouse_controller.html#a8afd7ab9fc2d9768228c59250f27c3f8">GetDragObjects</a>()</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">return</span> dragPreviewGameObjects;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#a47ce689ad82385d2fdc959cfca34c6b5">  100</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="class_tile.html">Tile</a> <a class="code" href="class_mouse_controller.html#a47ce689ad82385d2fdc959cfca34c6b5">GetMouseOverTile</a>()</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#ad2ac06d87936d4b4cdaab4bef1107feb">GetTileAtWorldCoord</a>(currFramePosition);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#aa4c2fcaf3a053b691fec75a34d93b5c4">  105</a></span>&#160;    <span class="keyword">public</span> GameObject <a class="code" href="class_mouse_controller.html#aa4c2fcaf3a053b691fec75a34d93b5c4">GetCursorParent</a>()</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">return</span> cursorParent;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#aa38db8a75d9e6875bbc574588b26ac41">  110</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_mouse_controller.html#aa38db8a75d9e6875bbc574588b26ac41">StartBuildMode</a>()</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        currentMode = <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.BUILD;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#a99a99423977b205150b7f05a2701f581">  115</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_mouse_controller.html#a99a99423977b205150b7f05a2701f581">StartSpawnMode</a>()</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        currentMode = <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SPAWN_INVENTORY;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Update is called once per frame.</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#ac9b2f0fae750d7128123db59fe99c6d5">  121</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_mouse_controller.html#ac9b2f0fae750d7128123db59fe99c6d5">Update</a>()</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        UpdateCurrentFramePosition();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        CalculatePlacingPosition();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        CheckModeChanges();</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        CheckIfContextMenuActivated();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        mouseCursor.<a class="code" href="class_mouse_cursor.html#a6a2ef153df0c5594f0c53794fd48432f">Update</a>();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        UpdateDragging();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        UpdateCameraMovement();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        UpdateSelection();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">if</span> (SettingsKeyHolder.DeveloperMode)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            UpdateSpawnClicking();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment">// Save the mouse position from this frame.</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="comment">// We don&#39;t use currFramePosition because we may have moved the camera.</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        StoreFramePosition();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#a3ef7887060eaa7a7320c5432a395e923">  144</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_mouse_controller.html#a3ef7887060eaa7a7320c5432a395e923">IsCharacterSelected</a>()</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> (mySelection != null)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span> mySelection.<a class="code" href="class_selection_info.html#ad0fa265814f54128149cf7fa09fbdef3">IsCharacterSelected</a>();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="class_mouse_controller.html#ad4712d93dd933c64427391b9789b3d99">  154</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_mouse_controller.html#ad4712d93dd933c64427391b9789b3d99">ClearMouseMode</a>(<span class="keywordtype">bool</span> changeMode = <span class="keyword">false</span>)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        isDragging = <span class="keyword">false</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">if</span> (changeMode)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            currentMode = <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SELECT;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateCurrentFramePosition()</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        currFramePosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        currFramePosition.z = <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> CheckModeChanges()</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span> (Input.GetKeyUp(KeyCode.Escape) || Input.GetMouseButtonUp(1))</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">if</span> (currentMode == <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.BUILD &amp;&amp; isPanning == <span class="keyword">false</span>)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <a class="code" href="class_mouse_controller.html#ad4712d93dd933c64427391b9789b3d99">ClearMouseMode</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentMode == <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SPAWN_INVENTORY &amp;&amp; isPanning == <span class="keyword">false</span>)</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                currentMode = <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SELECT;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> CheckIfContextMenuActivated()</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> (Input.GetKeyUp(KeyCode.Escape) || Input.GetMouseButtonUp(1))</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="comment">// Is the context also supposed to open on ESCAPE? That seems wrong</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordflow">if</span> (currentMode == <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SELECT)</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">if</span> (contextMenu != null &amp;&amp; <a class="code" href="class_mouse_controller.html#a47ce689ad82385d2fdc959cfca34c6b5">GetMouseOverTile</a>() != null)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">if</span> (isPanning)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        contextMenu.<a class="code" href="class_context_menu.html#af006f7eed65862d739697b80f267119b">Close</a>();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (contextMenu != null)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        contextMenu.<a class="code" href="class_context_menu.html#a09a23a7066bb880128dff3eaa7731787">Open</a>(<a class="code" href="class_mouse_controller.html#a47ce689ad82385d2fdc959cfca34c6b5">GetMouseOverTile</a>());</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> StoreFramePosition()</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        lastFramePosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        lastFramePosition.z = <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> CalculatePlacingPosition()</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="comment">// If we are placing a multitile object we would like to modify the postilion where the mouse grabs it.</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span> (currentMode == <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.BUILD</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            &amp;&amp; buildModeController.<a class="code" href="class_build_mode_controller.html#ac6fdada4acb0019086133d0a14f588d5">BuildMode</a> == <a class="code" href="_build_mode_controller_8cs.html#a9c6873c2efeb065f633a16b39a5841bd">BuildMode</a>.FURNITURE</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            &amp;&amp; <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">Furniture</a>.Has(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            &amp;&amp; (<a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">Furniture</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>).Width &gt; 1</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            || <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">Furniture</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>).Height &gt; 1))</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="class_furniture.html">Furniture</a> furnitureToBuild = <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">Furniture</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>).Clone();</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            furnitureToBuild.<a class="code" href="class_furniture.html#ac11b1b3875abe21193844976a90032de">SetRotation</a>(buildModeController.<a class="code" href="class_build_mode_controller.html#a179a7474206bcddbf78d17574c1100dc">CurrentPreviewRotation</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            Sprite sprite = furnitureSpriteController.<a class="code" href="class_furniture_sprite_controller.html#a28c4198ec62f455ece7489a0c40b9cc9">GetSpriteForFurniture</a>(furnitureToBuild.<a class="code" href="class_furniture.html#a20ab8b51ecf342cf0463482bf2816de4">Type</a>);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="comment">// Use the center of the Furniture.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            currPlacingPosition = currFramePosition - ImageUtils.SpritePivotOffset(sprite, buildModeController.<a class="code" href="class_build_mode_controller.html#a179a7474206bcddbf78d17574c1100dc">CurrentPreviewRotation</a>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            currPlacingPosition = currFramePosition;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateSelection()</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">// This handles us left-clicking on furniture or characters to set a selection.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">if</span> (Input.GetKeyUp(KeyCode.Escape))</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            mySelection = null;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> (currentMode != <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SELECT)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">// If we&#39;re over a UI element, then bail out from this.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">if</span> (EventSystem.current.IsPointerOverGameObject())</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span> (Input.GetMouseButtonUp(0))</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">if</span> (contextMenu != null)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                contextMenu.<a class="code" href="class_context_menu.html#af006f7eed65862d739697b80f267119b">Close</a>();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="comment">// We just release the mouse button, so that&#39;s our queue to update our selection.</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="class_tile.html">Tile</a> tileUnderMouse = <a class="code" href="class_mouse_controller.html#a47ce689ad82385d2fdc959cfca34c6b5">GetMouseOverTile</a>();</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">if</span> (tileUnderMouse == null)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="comment">// No valid tile under mouse.</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">if</span> (mySelection == null || mySelection.<a class="code" href="class_selection_info.html#a189d6ba2e1bce37b94947ba5974e5096">Tile</a> != tileUnderMouse)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <span class="keywordflow">if</span> (mySelection != null)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    mySelection.<a class="code" href="class_selection_info.html#a8ae5716ce65fb768ba41c5e2b86673db">GetSelectedStuff</a>().<a class="code" href="interface_i_selectable.html#a52eadd6ad90b4dcb9073f4488b0b137f">IsSelected</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <span class="comment">// We have just selected a brand new tile, reset the info.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                mySelection = <span class="keyword">new</span> <a class="code" href="class_selection_info.html">SelectionInfo</a>(tileUnderMouse);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                mySelection.<a class="code" href="class_selection_info.html#a8ae5716ce65fb768ba41c5e2b86673db">GetSelectedStuff</a>().<a class="code" href="interface_i_selectable.html#a52eadd6ad90b4dcb9073f4488b0b137f">IsSelected</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="comment">// This is the same tile we already have selected, so cycle the subSelection to the next non-null item.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="comment">// Not that the tile sub selection can NEVER be null, so we know we&#39;ll always find something.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="comment">// Rebuild the array of possible sub-selection in case characters moved in or out of the tile.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="comment">// [IsSelected] Set our last stuff to be not selected because were selecting the next stuff</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                mySelection.<a class="code" href="class_selection_info.html#a8ae5716ce65fb768ba41c5e2b86673db">GetSelectedStuff</a>().<a class="code" href="interface_i_selectable.html#a52eadd6ad90b4dcb9073f4488b0b137f">IsSelected</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                mySelection.<a class="code" href="class_selection_info.html#a184257ca4a6f7d0c9e60c8815d8c4b72">BuildStuffInTile</a>();</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                mySelection.<a class="code" href="class_selection_info.html#ae8b10bdd6bacc96de5d35363ea1f15dd">SelectNextStuff</a>();</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                mySelection.<a class="code" href="class_selection_info.html#a8ae5716ce65fb768ba41c5e2b86673db">GetSelectedStuff</a>().<a class="code" href="interface_i_selectable.html#a52eadd6ad90b4dcb9073f4488b0b137f">IsSelected</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateDragging()</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        CleanUpDragPreviews();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (currentMode != <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.BUILD)</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        UpdateIsDragging();</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> (isDragging == <span class="keyword">false</span> || buildModeController.<a class="code" href="class_build_mode_controller.html#afa05334c74ecba755e41508ac035725b">IsObjectDraggable</a>() == <span class="keyword">false</span>)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            dragStartPosition = currPlacingPosition;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="class_mouse_controller_1_1_drag_parameters.html">DragParameters</a> dragParams = GetDragParameters();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        ShowPreviews(dragParams);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="comment">// End Drag.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">if</span> (isDragging &amp;&amp; Input.GetMouseButtonUp(0))</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            isDragging = <span class="keyword">false</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="comment">// If we&#39;re over a UI element, then bail out from this.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">if</span> (EventSystem.current.IsPointerOverGameObject())</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            BuildOnDraggedTiles(dragParams);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> CleanUpDragPreviews()</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">while</span> (dragPreviewGameObjects.Count &gt; 0)</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            GameObject go = dragPreviewGameObjects[0];</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            dragPreviewGameObjects.RemoveAt(0);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            SimplePool.Despawn(go);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateIsDragging()</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="comment">// TODO Keyboard input does not belong in MouseController. Move to KeyboardController?</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">if</span> (isDragging &amp;&amp; (Input.GetMouseButtonUp(1) || Input.GetKeyDown(KeyCode.Escape)))</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            isDragging = <span class="keyword">false</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isDragging == <span class="keyword">false</span> &amp;&amp; Input.GetMouseButtonDown(0))</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            isDragging = <span class="keyword">true</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">private</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html">DragParameters</a> GetDragParameters()</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordtype">int</span> startX = Mathf.FloorToInt(dragStartPosition.x + 0.5f);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordtype">int</span> endX = Mathf.FloorToInt(currPlacingPosition.x + 0.5f);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordtype">int</span> startY = Mathf.FloorToInt(dragStartPosition.y + 0.5f);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordtype">int</span> endY = Mathf.FloorToInt(currPlacingPosition.y + 0.5f);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html">DragParameters</a>(startX, endX, startY, endY);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> ShowPreviews(<a class="code" href="class_mouse_controller_1_1_drag_parameters.html">DragParameters</a> dragParams)</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a>; x &lt;= dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">EndX</a>; x++)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">StartY</a>; y &lt;= dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">EndY</a>; y++)</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <a class="code" href="class_tile.html">Tile</a> t = <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#aa3b61545a41730beea4b3d0dfedb0574">World</a>.<a class="code" href="class_world.html#aeff2ae07aa8dcbe54fb9386ca043398c">GetTileAt</a>(x, y, <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="keywordflow">if</span> (t != null)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    <span class="comment">// Display the building hint on top of this tile position.</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    <span class="keywordflow">if</span> (buildModeController.<a class="code" href="class_build_mode_controller.html#ac6fdada4acb0019086133d0a14f588d5">BuildMode</a> == <a class="code" href="_build_mode_controller_8cs.html#a9c6873c2efeb065f633a16b39a5841bd">BuildMode</a>.FURNITURE)</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                        <a class="code" href="class_furniture.html">Furniture</a> proto = <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">Furniture</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                        <span class="keywordflow">if</span> (IsPartOfDrag(t, dragParams, proto.<a class="code" href="class_furniture.html#ae368a4dd184283499a882e715b8a8388">DragType</a>))</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                        {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                            ShowFurnitureSpriteAtTile(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>, t);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                            ShowWorkSpotSpriteAtTile(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>, t);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                        }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buildModeController.<a class="code" href="class_build_mode_controller.html#ac6fdada4acb0019086133d0a14f588d5">BuildMode</a> == <a class="code" href="_build_mode_controller_8cs.html#a9c6873c2efeb065f633a16b39a5841bd">BuildMode</a>.UTILITY)</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                    {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        <a class="code" href="class_utility.html">Utility</a> proto = <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#a0628717a2cce375062112062d2200435">Utility</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                        <span class="keywordflow">if</span> (IsPartOfDrag(t, dragParams, proto.<a class="code" href="class_utility.html#a6594cc21d854b3a0962bf10a12b1306b">DragType</a>))</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                        {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                            ShowUtilitySpriteAtTile(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>, t);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                        ShowGenericVisuals(x, y);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> ShowGenericVisuals(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        GameObject go = SimplePool.Spawn(circleCursorPrefab, <span class="keyword">new</span> Vector3(x, y, <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>), Quaternion.identity);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        go.transform.SetParent(cursorParent.transform, <span class="keyword">true</span>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        go.GetComponent&lt;SpriteRenderer&gt;().sprite = <a class="code" href="class_sprite_manager.html">SpriteManager</a>.<a class="code" href="class_sprite_manager.html#a726f293c39df8c71073dfae36c8ac9ec">GetSprite</a>(<span class="stringliteral">&quot;UI&quot;</span>, <span class="stringliteral">&quot;CursorCircle&quot;</span>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        dragPreviewGameObjects.Add(go);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> BuildOnDraggedTiles(<a class="code" href="class_mouse_controller_1_1_drag_parameters.html">DragParameters</a> dragParams)</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a>; x &lt;= dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">EndX</a>; x++)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="comment">// Variables for the for-loop over the y-coordinates.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="comment">// These are used to determine whether the loop should run from highest to lowest values or vice-versa.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="comment">// The tiles are thus added in a snake or zig-zag pattern, which makes building more efficient.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordtype">int</span> begin = (x - dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a>) % 2 == 0 ? dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">StartY</a> : dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">EndY</a>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordtype">int</span> stop = (x - dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a>) % 2 == 0 ? dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">EndY</a> + 1 : dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">StartY</a> - 1;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordtype">int</span> increment = (x - dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a>) % 2 == 0 ? 1 : -1;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = begin; y != stop; y += increment)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <a class="code" href="class_tile.html">Tile</a> tile = <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#aa3b61545a41730beea4b3d0dfedb0574">World</a>.<a class="code" href="class_world.html#aeff2ae07aa8dcbe54fb9386ca043398c">GetTileAt</a>(x, y, <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                <span class="keywordflow">if</span> (tile == null)</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                    <span class="comment">// Trying to build off the map, bail out of this cycle.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordflow">if</span> (buildModeController.<a class="code" href="class_build_mode_controller.html#ac6fdada4acb0019086133d0a14f588d5">BuildMode</a> == <a class="code" href="_build_mode_controller_8cs.html#a9c6873c2efeb065f633a16b39a5841bd">BuildMode</a>.FURNITURE)</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    <span class="comment">// Check for furniture dragType.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    <a class="code" href="class_furniture.html">Furniture</a> proto = <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">Furniture</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <span class="keywordflow">if</span> (IsPartOfDrag(tile, dragParams, proto.<a class="code" href="class_furniture.html#ae368a4dd184283499a882e715b8a8388">DragType</a>))</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        <span class="comment">// Call BuildModeController::DoBuild().</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                        buildModeController.<a class="code" href="class_build_mode_controller.html#acc5df17b8a7f94448334cf7e5a414b5b">DoBuild</a>(tile);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buildModeController.<a class="code" href="class_build_mode_controller.html#ac6fdada4acb0019086133d0a14f588d5">BuildMode</a> == <a class="code" href="_build_mode_controller_8cs.html#a9c6873c2efeb065f633a16b39a5841bd">BuildMode</a>.UTILITY)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    <span class="comment">// Check for furniture dragType.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    <a class="code" href="class_utility.html">Utility</a> proto = <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#a0628717a2cce375062112062d2200435">Utility</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    <span class="keywordflow">if</span> (IsPartOfDrag(tile, dragParams, proto.<a class="code" href="class_utility.html#a6594cc21d854b3a0962bf10a12b1306b">DragType</a>))</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                        <span class="comment">// Call BuildModeController::DoBuild().</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                        buildModeController.<a class="code" href="class_build_mode_controller.html#acc5df17b8a7f94448334cf7e5a414b5b">DoBuild</a>(tile);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    buildModeController.<a class="code" href="class_build_mode_controller.html#acc5df17b8a7f94448334cf7e5a414b5b">DoBuild</a>(tile);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="comment">// In devmode, utilities don&#39;t build their network, and one of the utilities built needs UpdateGrid called explicitly after all are built.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> (buildModeController.<a class="code" href="class_build_mode_controller.html#ac6fdada4acb0019086133d0a14f588d5">BuildMode</a> == <a class="code" href="_build_mode_controller_8cs.html#a9c6873c2efeb065f633a16b39a5841bd">BuildMode</a>.UTILITY &amp;&amp; SettingsKeyHolder.DeveloperMode)</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <a class="code" href="class_tile.html">Tile</a> firstTile = <a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#aeff2ae07aa8dcbe54fb9386ca043398c">GetTileAt</a>(dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a29bdcd865b3e1dfc11ee23e1c485ed8a">RawStartX</a>, dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ac0506797d9e40d97eb40c1598523f91c">RawStartY</a>, <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <a class="code" href="class_utility.html">Utility</a> utility = firstTile.<a class="code" href="class_tile.html#a2073539dbc53f09e81b688dacfc4efb7">Utilities</a>[<a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#a0628717a2cce375062112062d2200435">Utility</a>.Get(buildModeController.<a class="code" href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeType</a>).Type];</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            utility.<a class="code" href="class_utility.html#aef8d5581e49a8841dbd15f9d0f6b6c3c">UpdateGrid</a>(utility);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// Checks whether a tile is valid for the drag type, given the drag parameters</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// Returns true if tile should be included, false otherwise</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">bool</span> IsPartOfDrag(<a class="code" href="class_tile.html">Tile</a> tile, <a class="code" href="class_mouse_controller_1_1_drag_parameters.html">DragParameters</a> dragParams, <span class="keywordtype">string</span> dragType)</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">switch</span> (dragType)</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;border&quot;</span>:</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <span class="keywordflow">return</span> tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a> == dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a> || tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a> == dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">EndX</a> || tile.<a class="code" href="class_tile.html#aaa6f10c5c75614c1c855a9e5be97acd0">Y</a> == dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">StartY</a> || tile.<a class="code" href="class_tile.html#aaa6f10c5c75614c1c855a9e5be97acd0">Y</a> == dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">EndY</a>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;path&quot;</span>:</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                <span class="keywordtype">bool</span> withinXBounds = dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a> &lt;= tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a> &amp;&amp; tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a> &lt;= dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">EndX</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="keywordtype">bool</span> onPath = tile.<a class="code" href="class_tile.html#aaa6f10c5c75614c1c855a9e5be97acd0">Y</a> == dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ac0506797d9e40d97eb40c1598523f91c">RawStartY</a> || tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a> == dragParams.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a372c74a0623686c41c30e7f744bbd38d">RawEndX</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                <span class="keywordflow">return</span> withinXBounds &amp;&amp; onPath;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateSpawnClicking()</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (currentMode != <a class="code" href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseMode</a>.SPAWN_INVENTORY)</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">if</span> (EventSystem.current.IsPointerOverGameObject())</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keywordflow">if</span> (Input.GetMouseButtonUp(0))</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            <a class="code" href="class_tile.html">Tile</a> t = <a class="code" href="class_mouse_controller.html#a47ce689ad82385d2fdc959cfca34c6b5">GetMouseOverTile</a>();</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a06f2556c0b263655566adb7b58bbd061">SpawnInventoryController</a>.<a class="code" href="class_spawn_inventory_controller.html#a99169b5a397cc3ca5d00a4af9ff7486a">SpawnInventory</a>(t);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateCameraMovement()</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span> (Input.GetMouseButtonDown(1) || Input.GetMouseButtonDown(2))</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            panningMouseStart = Camera.main.ScreenToWorldPoint(Input.mousePosition);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            panningMouseStart.z = 0;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">if</span> (!isPanning)</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            Vector3 currentMousePosition;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            currentMousePosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            currentMousePosition.z = 0;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">if</span> (Vector3.Distance(panningMouseStart, currentMousePosition) &gt; panningThreshold * Camera.main.orthographicSize)</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                isPanning = <span class="keyword">true</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// Handle screen panning.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">if</span> (isPanning &amp;&amp; (Input.GetMouseButton(1) || Input.GetMouseButton(2)))</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        {   <span class="comment">// Right or Middle Mouse Button.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            Vector3 diff = lastFramePosition - currFramePosition;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">if</span> (diff != Vector3.zero)</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                contextMenu.<a class="code" href="class_context_menu.html#af006f7eed65862d739697b80f267119b">Close</a>();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                Camera.main.transform.Translate(diff);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keywordflow">if</span> (Input.GetMouseButton(1))</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                isDragging = <span class="keyword">false</span>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">if</span> (!Input.GetMouseButton(1) &amp;&amp; !Input.GetMouseButton(2))</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            isPanning = <span class="keyword">false</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="comment">// If we&#39;re over a UI element or the settings/options menu is open, then bail out from this.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">if</span> (EventSystem.current.IsPointerOverGameObject()</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            || <a class="code" href="class_game_controller.html">GameController</a>.<a class="code" href="class_game_controller.html#abe6246464a3deffea7bac0356478ba89">Instance</a>.<a class="code" href="class_game_controller.html#a61cb8435fc41507058b6dc08419408a2">IsModal</a>)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">if</span> (Input.GetAxis(<span class="stringliteral">&quot;Mouse ScrollWheel&quot;</span>) != 0)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a5685e1f13b68e97d726cbb9ee92c55f7">ChangeZoom</a>(Input.GetAxis(<span class="stringliteral">&quot;Mouse ScrollWheel&quot;</span>));</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        UpdateCameraBounds();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> UpdateCameraBounds()</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        Vector3 oldPos = Camera.main.transform.position;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        oldPos.x = Mathf.Clamp(oldPos.x, 0, (<span class="keywordtype">float</span>)<a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#a861a1e47079f04cf1de46887f76f6177">Width</a> - 1);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        oldPos.y = Mathf.Clamp(oldPos.y, 0, (<span class="keywordtype">float</span>)<a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#ac3b5695035eeab526a054329773366fc">Height</a> - 1);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        Camera.main.transform.position = oldPos;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> ShowFurnitureSpriteAtTile(<span class="keywordtype">string</span> furnitureType, <a class="code" href="class_tile.html">Tile</a> tile)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        GameObject go = <span class="keyword">new</span> GameObject();</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        go.transform.SetParent(furnitureParent.transform, <span class="keyword">true</span>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        dragPreviewGameObjects.Add(go);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        SpriteRenderer sr = go.AddComponent&lt;SpriteRenderer&gt;();</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        sr.sortingLayerName = <span class="stringliteral">&quot;Jobs&quot;</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        sr.sprite = furnitureSpriteController.<a class="code" href="class_furniture_sprite_controller.html#a28c4198ec62f455ece7489a0c40b9cc9">GetSpriteForFurniture</a>(furnitureType);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#afd8c3d504d1170f5c99b20162fc25a0e">FurnitureManager</a>.<a class="code" href="class_furniture_manager.html#a358df1d08a99d84ea0905cc299d5365c">IsPlacementValid</a>(furnitureType, tile, buildModeController.<a class="code" href="class_build_mode_controller.html#a179a7474206bcddbf78d17574c1100dc">CurrentPreviewRotation</a>) &amp;&amp;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#afd8c3d504d1170f5c99b20162fc25a0e">FurnitureManager</a>.<a class="code" href="class_furniture_manager.html#a82b6dcc693f7e66ee2cc65bfc9073efb">IsWorkSpotClear</a>(furnitureType, tile) &amp;&amp;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            buildModeController.<a class="code" href="class_build_mode_controller.html#a2beedb8a4f48ee65488038473c180b50">DoesFurnitureBuildJobOverlapExistingBuildJob</a>(tile, furnitureType, buildModeController.<a class="code" href="class_build_mode_controller.html#a179a7474206bcddbf78d17574c1100dc">CurrentPreviewRotation</a>) == <span class="keyword">false</span>)</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            sr.color = <span class="keyword">new</span> Color(0.5f, 1f, 0.5f, 0.25f);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            sr.color = <span class="keyword">new</span> Color(1f, 0.5f, 0.5f, 0.25f);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        go.name = furnitureType + <span class="stringliteral">&quot;_p_&quot;</span> + tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a> + <span class="stringliteral">&quot;_&quot;</span> + tile.<a class="code" href="class_tile.html#aaa6f10c5c75614c1c855a9e5be97acd0">Y</a> + <span class="stringliteral">&quot;_&quot;</span> + tile.<a class="code" href="class_tile.html#a8f051217146f35f8df3f110a5408b7fe">Z</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        go.transform.position = tile.<a class="code" href="class_tile.html#a195ab8d54782b43fb51c55c833bfe7e1">Vector3</a> + ImageUtils.SpritePivotOffset(sr.sprite, buildModeController.<a class="code" href="class_build_mode_controller.html#a179a7474206bcddbf78d17574c1100dc">CurrentPreviewRotation</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        go.transform.Rotate(0, 0, buildModeController.<a class="code" href="class_build_mode_controller.html#a179a7474206bcddbf78d17574c1100dc">CurrentPreviewRotation</a>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> ShowWorkSpotSpriteAtTile(<span class="keywordtype">string</span> furnitureType, <a class="code" href="class_tile.html">Tile</a> tile)</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="class_furniture.html">Furniture</a> proto = <a class="code" href="class_prototype_manager.html">PrototypeManager</a>.<a class="code" href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">Furniture</a>.Get(furnitureType);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">// if the workspot is inside the furniture, there&#39;s no reason to show it separately</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">if</span> (proto.<a class="code" href="class_furniture.html#acde3e7f9d40af5b75c441d53778a3fe2">Jobs</a>.<a class="code" href="class_buildable_jobs.html#a65dd0d32fb03f04cf0fb38a484edd420">WorkSpotOffset</a>.x &gt;= 0 &amp;&amp; proto.<a class="code" href="class_furniture.html#acde3e7f9d40af5b75c441d53778a3fe2">Jobs</a>.<a class="code" href="class_buildable_jobs.html#a65dd0d32fb03f04cf0fb38a484edd420">WorkSpotOffset</a>.x &lt; proto.<a class="code" href="class_furniture.html#ae25de1a4dc2d70f8f8ab39a66aff60c2">Width</a> &amp;&amp; proto.<a class="code" href="class_furniture.html#acde3e7f9d40af5b75c441d53778a3fe2">Jobs</a>.<a class="code" href="class_buildable_jobs.html#a65dd0d32fb03f04cf0fb38a484edd420">WorkSpotOffset</a>.y &gt;= 0 &amp;&amp; proto.<a class="code" href="class_furniture.html#acde3e7f9d40af5b75c441d53778a3fe2">Jobs</a>.<a class="code" href="class_buildable_jobs.html#a65dd0d32fb03f04cf0fb38a484edd420">WorkSpotOffset</a>.y &lt; proto.<a class="code" href="class_furniture.html#a1d0f0137f064f6231b3eeca83dc1e843">Height</a>)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        GameObject go = <span class="keyword">new</span> GameObject();</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        go.transform.SetParent(furnitureParent.transform, <span class="keyword">true</span>);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        dragPreviewGameObjects.Add(go);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        SpriteRenderer sr = go.AddComponent&lt;SpriteRenderer&gt;();</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        sr.sortingLayerName = <span class="stringliteral">&quot;Jobs&quot;</span>;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        sr.sprite = <a class="code" href="class_sprite_manager.html">SpriteManager</a>.<a class="code" href="class_sprite_manager.html#a726f293c39df8c71073dfae36c8ac9ec">GetSprite</a>(<span class="stringliteral">&quot;UI&quot;</span>, <span class="stringliteral">&quot;WorkSpotIndicator&quot;</span>);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#afd8c3d504d1170f5c99b20162fc25a0e">FurnitureManager</a>.<a class="code" href="class_furniture_manager.html#a358df1d08a99d84ea0905cc299d5365c">IsPlacementValid</a>(furnitureType, tile) &amp;&amp;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#afd8c3d504d1170f5c99b20162fc25a0e">FurnitureManager</a>.<a class="code" href="class_furniture_manager.html#a82b6dcc693f7e66ee2cc65bfc9073efb">IsWorkSpotClear</a>(furnitureType, tile) &amp;&amp;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            buildModeController.<a class="code" href="class_build_mode_controller.html#a2beedb8a4f48ee65488038473c180b50">DoesFurnitureBuildJobOverlapExistingBuildJob</a>(tile, furnitureType) == <span class="keyword">false</span>)</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            sr.color = <span class="keyword">new</span> Color(0.5f, 1f, 0.5f, 0.25f);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            sr.color = <span class="keyword">new</span> Color(1f, 0.5f, 0.5f, 0.25f);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        go.transform.position = <span class="keyword">new</span> Vector3(tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a> + proto.<a class="code" href="class_furniture.html#acde3e7f9d40af5b75c441d53778a3fe2">Jobs</a>.<a class="code" href="class_buildable_jobs.html#a65dd0d32fb03f04cf0fb38a484edd420">WorkSpotOffset</a>.x, tile.<a class="code" href="class_tile.html#aaa6f10c5c75614c1c855a9e5be97acd0">Y</a> + proto.<a class="code" href="class_furniture.html#acde3e7f9d40af5b75c441d53778a3fe2">Jobs</a>.<a class="code" href="class_buildable_jobs.html#a65dd0d32fb03f04cf0fb38a484edd420">WorkSpotOffset</a>.y, <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keyword">private</span> <span class="keywordtype">void</span> ShowUtilitySpriteAtTile(<span class="keywordtype">string</span> type, <a class="code" href="class_tile.html">Tile</a> tile)</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    {</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        GameObject go = <span class="keyword">new</span> GameObject();</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        go.transform.SetParent(furnitureParent.transform, <span class="keyword">true</span>);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        dragPreviewGameObjects.Add(go);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        SpriteRenderer sr = go.AddComponent&lt;SpriteRenderer&gt;();</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        sr.sortingLayerName = <span class="stringliteral">&quot;Jobs&quot;</span>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        sr.sprite = utilitySpriteController.<a class="code" href="class_utility_sprite_controller.html#a3f73139fa127ad921d1deaddd23fc011">GetSpriteForUtility</a>(type);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_world.html">World</a>.<a class="code" href="class_world.html#a611a474efcbf8859dc219c66e667abb4">Current</a>.<a class="code" href="class_world.html#a093670f1e25572daa8cadd96ab295250">UtilityManager</a>.<a class="code" href="class_utility_manager.html#a617ae33d8a98a4c831036acfb91ccb8a">IsPlacementValid</a>(type, tile) &amp;&amp;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            buildModeController.<a class="code" href="class_build_mode_controller.html#ab58a539a9a44498085bb28a63d8c4713">DoesSameUtilityTypeAlreadyExist</a>(type, tile) &amp;&amp;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            buildModeController.<a class="code" href="class_build_mode_controller.html#a701cb5c8326af048f78a511cf7c1c190">DoesUtilityBuildJobOverlapExistingBuildJob</a>(type, tile) == <span class="keyword">false</span>)</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            sr.color = <span class="keyword">new</span> Color(0.5f, 1f, 0.5f, 0.25f);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            sr.color = <span class="keyword">new</span> Color(1f, 0.5f, 0.5f, 0.25f);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        go.transform.position = <span class="keyword">new</span> Vector3(tile.<a class="code" href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">X</a>, tile.<a class="code" href="class_tile.html#aaa6f10c5c75614c1c855a9e5be97acd0">Y</a>, <a class="code" href="class_world_controller.html">WorldController</a>.<a class="code" href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">Instance</a>.<a class="code" href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">CameraController</a>.<a class="code" href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CurrentLayer</a>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html">  652</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_mouse_controller_1_1_drag_parameters.html">DragParameters</a></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    {</div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#a2e6a08c9135e303d430b7b0c8d8c9a9d">  654</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a2e6a08c9135e303d430b7b0c8d8c9a9d">DragParameters</a>(<span class="keywordtype">int</span> startX, <span class="keywordtype">int</span> endX, <span class="keywordtype">int</span> startY, <span class="keywordtype">int</span> endY)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a29bdcd865b3e1dfc11ee23e1c485ed8a">RawStartX</a> = startX;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a372c74a0623686c41c30e7f744bbd38d">RawEndX</a> = endX;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ac0506797d9e40d97eb40c1598523f91c">RawStartY</a> = startY;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a120c419cbd39482166a84e70c51641fe">RawEndY</a> = endY;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a> = Mathf.Min(startX, endX);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">EndX</a> = Mathf.Max(startX, endX);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">StartY</a> = Mathf.Min(startY, endY);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            this.<a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">EndY</a> = Mathf.Max(startY, endY);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#a29bdcd865b3e1dfc11ee23e1c485ed8a">  667</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a29bdcd865b3e1dfc11ee23e1c485ed8a">RawStartX</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#a372c74a0623686c41c30e7f744bbd38d">  669</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a372c74a0623686c41c30e7f744bbd38d">RawEndX</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#ac0506797d9e40d97eb40c1598523f91c">  671</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ac0506797d9e40d97eb40c1598523f91c">RawStartY</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#a120c419cbd39482166a84e70c51641fe">  673</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a120c419cbd39482166a84e70c51641fe">RawEndY</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">  675</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">StartX</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">  677</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">EndX</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">  679</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">StartY</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">  681</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">EndY</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div><div class="ttc" id="class_context_menu_html_af006f7eed65862d739697b80f267119b"><div class="ttname"><a href="class_context_menu.html#af006f7eed65862d739697b80f267119b">ContextMenu.Close</a></div><div class="ttdeci">void Close()</div><div class="ttdoc">Close this context menu. </div><div class="ttdef"><b>Definition:</b> <a href="_context_menu_8cs_source.html#l00036">ContextMenu.cs:36</a></div></div>
<div class="ttc" id="class_utility_html_a6594cc21d854b3a0962bf10a12b1306b"><div class="ttname"><a href="class_utility.html#a6594cc21d854b3a0962bf10a12b1306b">Utility.DragType</a></div><div class="ttdeci">string DragType</div><div class="ttdoc">Gets the type of dragging that is used to build multiples of this utility. e.g walls. </div><div class="ttdef"><b>Definition:</b> <a href="_utility_8cs_source.html#l00186">Utility.cs:186</a></div></div>
<div class="ttc" id="class_buildable_jobs_html_a65dd0d32fb03f04cf0fb38a484edd420"><div class="ttname"><a href="class_buildable_jobs.html#a65dd0d32fb03f04cf0fb38a484edd420">BuildableJobs.WorkSpotOffset</a></div><div class="ttdeci">Vector2 WorkSpotOffset</div><div class="ttdoc">Gets the spot offset where the Character will stand when he is using the buildable. This is relative to the bottom left tile of the sprite. This can be outside of the actual buildable. </div><div class="ttdef"><b>Definition:</b> <a href="_buildable_jobs_8cs_source.html#l00059">BuildableJobs.cs:59</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html">MouseController.DragParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00652">MouseController.cs:652</a></div></div>
<div class="ttc" id="class_context_menu_html_a09a23a7066bb880128dff3eaa7731787"><div class="ttname"><a href="class_context_menu.html#a09a23a7066bb880128dff3eaa7731787">ContextMenu.Open</a></div><div class="ttdeci">void Open(Tile tile)</div><div class="ttdoc">Open the context menu at the specified tile. </div><div class="ttdef"><b>Definition:</b> <a href="_context_menu_8cs_source.html#l00022">ContextMenu.cs:22</a></div></div>
<div class="ttc" id="class_prototype_manager_html_ab60d7059dfa3996ba62c501f293d3afe"><div class="ttname"><a href="class_prototype_manager.html#ab60d7059dfa3996ba62c501f293d3afe">PrototypeManager.Furniture</a></div><div class="ttdeci">static PrototypeMap&lt; Furniture &gt; Furniture</div><div class="ttdoc">Gets the furniture prototype map. </div><div class="ttdef"><b>Definition:</b> <a href="_prototype_manager_8cs_source.html#l00054">PrototypeManager.cs:54</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_a2e6a08c9135e303d430b7b0c8d8c9a9d"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#a2e6a08c9135e303d430b7b0c8d8c9a9d">MouseController.DragParameters.DragParameters</a></div><div class="ttdeci">DragParameters(int startX, int endX, int startY, int endY)</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00654">MouseController.cs:654</a></div></div>
<div class="ttc" id="class_furniture_sprite_controller_html"><div class="ttname"><a href="class_furniture_sprite_controller.html">FurnitureSpriteController</a></div><div class="ttdef"><b>Definition:</b> <a href="_furniture_sprite_controller_8cs_source.html#l00015">FurnitureSpriteController.cs:15</a></div></div>
<div class="ttc" id="class_context_menu_html"><div class="ttname"><a href="class_context_menu.html">ContextMenu</a></div><div class="ttdef"><b>Definition:</b> <a href="_context_menu_8cs_source.html#l00014">ContextMenu.cs:14</a></div></div>
<div class="ttc" id="class_world_html_a093670f1e25572daa8cadd96ab295250"><div class="ttname"><a href="class_world.html#a093670f1e25572daa8cadd96ab295250">World.UtilityManager</a></div><div class="ttdeci">UtilityManager UtilityManager</div><div class="ttdef"><b>Definition:</b> <a href="_world_8cs_source.html#l00129">World.cs:129</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_a29bdcd865b3e1dfc11ee23e1c485ed8a"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#a29bdcd865b3e1dfc11ee23e1c485ed8a">MouseController.DragParameters.RawStartX</a></div><div class="ttdeci">int RawStartX</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00667">MouseController.cs:667</a></div></div>
<div class="ttc" id="class_furniture_html_ac11b1b3875abe21193844976a90032de"><div class="ttname"><a href="class_furniture.html#ac11b1b3875abe21193844976a90032de">Furniture.SetRotation</a></div><div class="ttdeci">void SetRotation(float rotation)</div><div class="ttdef"><b>Definition:</b> <a href="_furniture_8cs_source.html#l01290">Furniture.cs:1290</a></div></div>
<div class="ttc" id="class_mouse_controller_html_a8afd7ab9fc2d9768228c59250f27c3f8"><div class="ttname"><a href="class_mouse_controller.html#a8afd7ab9fc2d9768228c59250f27c3f8">MouseController.GetDragObjects</a></div><div class="ttdeci">List&lt; GameObject &gt; GetDragObjects()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00095">MouseController.cs:95</a></div></div>
<div class="ttc" id="class_mouse_controller_html_a1cc8e4525f57977037f3cae9e70327ab"><div class="ttname"><a href="class_mouse_controller.html#a1cc8e4525f57977037f3cae9e70327ab">MouseController.GetIsDragging</a></div><div class="ttdeci">bool GetIsDragging()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00090">MouseController.cs:90</a></div></div>
<div class="ttc" id="class_sprite_manager_html_a726f293c39df8c71073dfae36c8ac9ec"><div class="ttname"><a href="class_sprite_manager.html#a726f293c39df8c71073dfae36c8ac9ec">SpriteManager.GetSprite</a></div><div class="ttdeci">static Sprite GetSprite(string categoryName, string spriteName)</div><div class="ttdoc">Gets the sprite for the given category and name. </div><div class="ttdef"><b>Definition:</b> <a href="_sprite_manager_8cs_source.html#l00046">SpriteManager.cs:46</a></div></div>
<div class="ttc" id="class_world_html"><div class="ttname"><a href="class_world.html">World</a></div><div class="ttdef"><b>Definition:</b> <a href="_world_8cs_source.html#l00021">World.cs:21</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_ab58a539a9a44498085bb28a63d8c4713"><div class="ttname"><a href="class_build_mode_controller.html#ab58a539a9a44498085bb28a63d8c4713">BuildModeController.DoesSameUtilityTypeAlreadyExist</a></div><div class="ttdeci">bool DoesSameUtilityTypeAlreadyExist(string type, Tile tile)</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00442">BuildModeController.cs:442</a></div></div>
<div class="ttc" id="class_mouse_controller_html_a15de1e155c9b78d28df606af2d6817dd"><div class="ttname"><a href="class_mouse_controller.html#a15de1e155c9b78d28df606af2d6817dd">MouseController.GetPlacingPosition</a></div><div class="ttdeci">Vector3 GetPlacingPosition()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00080">MouseController.cs:80</a></div></div>
<div class="ttc" id="class_spawn_inventory_controller_html_a99169b5a397cc3ca5d00a4af9ff7486a"><div class="ttname"><a href="class_spawn_inventory_controller.html#a99169b5a397cc3ca5d00a4af9ff7486a">SpawnInventoryController.SpawnInventory</a></div><div class="ttdeci">void SpawnInventory(Tile t)</div><div class="ttdef"><b>Definition:</b> <a href="_spawn_inventory_controller_8cs_source.html#l00045">SpawnInventoryController.cs:45</a></div></div>
<div class="ttc" id="class_mouse_controller_html_ad4712d93dd933c64427391b9789b3d99"><div class="ttname"><a href="class_mouse_controller.html#ad4712d93dd933c64427391b9789b3d99">MouseController.ClearMouseMode</a></div><div class="ttdeci">void ClearMouseMode(bool changeMode=false)</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00154">MouseController.cs:154</a></div></div>
<div class="ttc" id="class_tile_html_a2073539dbc53f09e81b688dacfc4efb7"><div class="ttname"><a href="class_tile.html#a2073539dbc53f09e81b688dacfc4efb7">Tile.Utilities</a></div><div class="ttdeci">Dictionary&lt; string, Utility &gt; Utilities</div><div class="ttdef"><b>Definition:</b> <a href="_tile_8cs_source.html#l00082">Tile.cs:82</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_utility_html"><div class="ttname"><a href="class_utility.html">Utility</a></div><div class="ttdoc">InstalledObjects are things like walls, doors, and utility (e.g. a sofa). </div><div class="ttdef"><b>Definition:</b> <a href="_utility_8cs_source.html#l00025">Utility.cs:25</a></div></div>
<div class="ttc" id="class_tile_html_aaa6f10c5c75614c1c855a9e5be97acd0"><div class="ttname"><a href="class_tile.html#aaa6f10c5c75614c1c855a9e5be97acd0">Tile.Y</a></div><div class="ttdeci">int Y</div><div class="ttdef"><b>Definition:</b> <a href="_tile_8cs_source.html#l00117">Tile.cs:117</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_afa05334c74ecba755e41508ac035725b"><div class="ttname"><a href="class_build_mode_controller.html#afa05334c74ecba755e41508ac035725b">BuildModeController.IsObjectDraggable</a></div><div class="ttdeci">bool IsObjectDraggable()</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00053">BuildModeController.cs:53</a></div></div>
<div class="ttc" id="class_world_html_ac3b5695035eeab526a054329773366fc"><div class="ttname"><a href="class_world.html#ac3b5695035eeab526a054329773366fc">World.Height</a></div><div class="ttdeci">int Height</div><div class="ttdef"><b>Definition:</b> <a href="_world_8cs_source.html#l00097">World.cs:97</a></div></div>
<div class="ttc" id="class_furniture_html_ae25de1a4dc2d70f8f8ab39a66aff60c2"><div class="ttname"><a href="class_furniture.html#ae25de1a4dc2d70f8f8ab39a66aff60c2">Furniture.Width</a></div><div class="ttdeci">int Width</div><div class="ttdoc">Gets the width of the furniture. </div><div class="ttdef"><b>Definition:</b> <a href="_furniture_8cs_source.html#l00309">Furniture.cs:309</a></div></div>
<div class="ttc" id="class_mouse_controller_html_aa4c2fcaf3a053b691fec75a34d93b5c4"><div class="ttname"><a href="class_mouse_controller.html#aa4c2fcaf3a053b691fec75a34d93b5c4">MouseController.GetCursorParent</a></div><div class="ttdeci">GameObject GetCursorParent()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00105">MouseController.cs:105</a></div></div>
<div class="ttc" id="class_prototype_manager_html_a0628717a2cce375062112062d2200435"><div class="ttname"><a href="class_prototype_manager.html#a0628717a2cce375062112062d2200435">PrototypeManager.Utility</a></div><div class="ttdeci">static PrototypeMap&lt; Utility &gt; Utility</div><div class="ttdoc">Gets the utility prototype map. </div><div class="ttdef"><b>Definition:</b> <a href="_prototype_manager_8cs_source.html#l00060">PrototypeManager.cs:60</a></div></div>
<div class="ttc" id="class_world_html_aeff2ae07aa8dcbe54fb9386ca043398c"><div class="ttname"><a href="class_world.html#aeff2ae07aa8dcbe54fb9386ca043398c">World.GetTileAt</a></div><div class="ttdeci">Tile GetTileAt(int x, int y, int z)</div><div class="ttdoc">Gets the tile data at x and y. </div><div class="ttdef"><b>Definition:</b> <a href="_world_8cs_source.html#l00188">World.cs:188</a></div></div>
<div class="ttc" id="class_time_manager_html_a8c617ca2654bfe0d219d75a1c18afaad"><div class="ttname"><a href="class_time_manager.html#a8c617ca2654bfe0d219d75a1c18afaad">TimeManager.Instance</a></div><div class="ttdeci">static TimeManager Instance</div><div class="ttdoc">Gets the TimeManager instance. </div><div class="ttdef"><b>Definition:</b> <a href="_time_manager_8cs_source.html#l00093">TimeManager.cs:93</a></div></div>
<div class="ttc" id="class_furniture_html_ae368a4dd184283499a882e715b8a8388"><div class="ttname"><a href="class_furniture.html#ae368a4dd184283499a882e715b8a8388">Furniture.DragType</a></div><div class="ttdeci">string DragType</div><div class="ttdoc">Gets the type of dragging that is used to build multiples of this furniture. e.g walls. </div><div class="ttdef"><b>Definition:</b> <a href="_furniture_8cs_source.html#l00346">Furniture.cs:346</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_ab9d8d0a036421e59f26fd0c7154aa42e"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#ab9d8d0a036421e59f26fd0c7154aa42e">MouseController.DragParameters.EndX</a></div><div class="ttdeci">int EndX</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00677">MouseController.cs:677</a></div></div>
<div class="ttc" id="class_tile_html"><div class="ttname"><a href="class_tile.html">Tile</a></div><div class="ttdef"><b>Definition:</b> <a href="_tile_8cs_source.html#l00030">Tile.cs:30</a></div></div>
<div class="ttc" id="class_mouse_cursor_html_a6a2ef153df0c5594f0c53794fd48432f"><div class="ttname"><a href="class_mouse_cursor.html#a6a2ef153df0c5594f0c53794fd48432f">MouseCursor.Update</a></div><div class="ttdeci">void Update()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_cursor_8cs_source.html#l00057">MouseCursor.cs:57</a></div></div>
<div class="ttc" id="class_camera_controller_html_a5685e1f13b68e97d726cbb9ee92c55f7"><div class="ttname"><a href="class_camera_controller.html#a5685e1f13b68e97d726cbb9ee92c55f7">CameraController.ChangeZoom</a></div><div class="ttdeci">void ChangeZoom(float amount)</div><div class="ttdef"><b>Definition:</b> <a href="_camera_controller_8cs_source.html#l00131">CameraController.cs:131</a></div></div>
<div class="ttc" id="class_mouse_controller_html_a94346c229fc62e5f63bcb737181fa946"><div class="ttname"><a href="class_mouse_controller.html#a94346c229fc62e5f63bcb737181fa946">MouseController.MouseController</a></div><div class="ttdeci">MouseController(BuildModeController buildModeController, FurnitureSpriteController furnitureSpriteController, UtilitySpriteController utilitySpriteController, GameObject cursorObject)</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00049">MouseController.cs:49</a></div></div>
<div class="ttc" id="class_tile_html_a195ab8d54782b43fb51c55c833bfe7e1"><div class="ttname"><a href="class_tile.html#a195ab8d54782b43fb51c55c833bfe7e1">Tile.Vector3</a></div><div class="ttdeci">Vector3 Vector3</div><div class="ttdef"><b>Definition:</b> <a href="_tile_8cs_source.html#l00138">Tile.cs:138</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_a372c74a0623686c41c30e7f744bbd38d"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#a372c74a0623686c41c30e7f744bbd38d">MouseController.DragParameters.RawEndX</a></div><div class="ttdeci">int RawEndX</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00669">MouseController.cs:669</a></div></div>
<div class="ttc" id="class_utility_manager_html_a617ae33d8a98a4c831036acfb91ccb8a"><div class="ttname"><a href="class_utility_manager.html#a617ae33d8a98a4c831036acfb91ccb8a">UtilityManager.IsPlacementValid</a></div><div class="ttdeci">bool IsPlacementValid(string type, Tile tile)</div><div class="ttdoc">Determines whether the placement of a utility with the given type at the given tile is valid...</div><div class="ttdef"><b>Definition:</b> <a href="_utility_manager_8cs_source.html#l00098">UtilityManager.cs:98</a></div></div>
<div class="ttc" id="class_world_controller_html_a69fb8eed57398b337b0604f49f7dbb2d"><div class="ttname"><a href="class_world_controller.html#a69fb8eed57398b337b0604f49f7dbb2d">WorldController.Instance</a></div><div class="ttdeci">static WorldController Instance</div><div class="ttdef"><b>Definition:</b> <a href="_world_controller_8cs_source.html#l00029">WorldController.cs:29</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_a120c419cbd39482166a84e70c51641fe"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#a120c419cbd39482166a84e70c51641fe">MouseController.DragParameters.RawEndY</a></div><div class="ttdeci">int RawEndY</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00673">MouseController.cs:673</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_ac0506797d9e40d97eb40c1598523f91c"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#ac0506797d9e40d97eb40c1598523f91c">MouseController.DragParameters.RawStartY</a></div><div class="ttdeci">int RawStartY</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00671">MouseController.cs:671</a></div></div>
<div class="ttc" id="class_mouse_cursor_html"><div class="ttname"><a href="class_mouse_cursor.html">MouseCursor</a></div><div class="ttdef"><b>Definition:</b> <a href="_mouse_cursor_8cs_source.html#l00013">MouseCursor.cs:13</a></div></div>
<div class="ttc" id="class_mouse_controller_html_aa9b016ba73cc945841e3fae192330a51"><div class="ttname"><a href="class_mouse_controller.html#aa9b016ba73cc945841e3fae192330a51">MouseController.MouseMode</a></div><div class="ttdeci">MouseMode</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00065">MouseController.cs:65</a></div></div>
<div class="ttc" id="class_furniture_manager_html_a358df1d08a99d84ea0905cc299d5365c"><div class="ttname"><a href="class_furniture_manager.html#a358df1d08a99d84ea0905cc299d5365c">FurnitureManager.IsPlacementValid</a></div><div class="ttdeci">bool IsPlacementValid(string type, Tile tile, float rotation=0f)</div><div class="ttdoc">Determines whether the placement of a furniture with the given type at the given tile is valid...</div><div class="ttdef"><b>Definition:</b> <a href="_furniture_manager_8cs_source.html#l00123">FurnitureManager.cs:123</a></div></div>
<div class="ttc" id="class_furniture_html_a1d0f0137f064f6231b3eeca83dc1e843"><div class="ttname"><a href="class_furniture.html#a1d0f0137f064f6231b3eeca83dc1e843">Furniture.Height</a></div><div class="ttdeci">int Height</div><div class="ttdoc">Gets the height of the furniture. </div><div class="ttdef"><b>Definition:</b> <a href="_furniture_8cs_source.html#l00314">Furniture.cs:314</a></div></div>
<div class="ttc" id="class_world_controller_html_aa3b61545a41730beea4b3d0dfedb0574"><div class="ttname"><a href="class_world_controller.html#aa3b61545a41730beea4b3d0dfedb0574">WorldController.World</a></div><div class="ttdeci">World World</div><div class="ttdef"><b>Definition:</b> <a href="_world_controller_8cs_source.html#l00066">WorldController.cs:66</a></div></div>
<div class="ttc" id="class_selection_info_html_a189d6ba2e1bce37b94947ba5974e5096"><div class="ttname"><a href="class_selection_info.html#a189d6ba2e1bce37b94947ba5974e5096">SelectionInfo.Tile</a></div><div class="ttdeci">Tile Tile</div><div class="ttdef"><b>Definition:</b> <a href="_selection_info_8cs_source.html#l00026">SelectionInfo.cs:26</a></div></div>
<div class="ttc" id="class_mouse_controller_html_a47ce689ad82385d2fdc959cfca34c6b5"><div class="ttname"><a href="class_mouse_controller.html#a47ce689ad82385d2fdc959cfca34c6b5">MouseController.GetMouseOverTile</a></div><div class="ttdeci">Tile GetMouseOverTile()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00100">MouseController.cs:100</a></div></div>
<div class="ttc" id="interface_i_selectable_html_a52eadd6ad90b4dcb9073f4488b0b137f"><div class="ttname"><a href="interface_i_selectable.html#a52eadd6ad90b4dcb9073f4488b0b137f">ISelectable.IsSelected</a></div><div class="ttdeci">bool IsSelected</div><div class="ttdef"><b>Definition:</b> <a href="_i_selectable_8cs_source.html#l00015">ISelectable.cs:15</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_aeff1dc27c03ea6b305e96cd27479e4f0"><div class="ttname"><a href="class_build_mode_controller.html#aeff1dc27c03ea6b305e96cd27479e4f0">BuildModeController.SetMouseController</a></div><div class="ttdeci">void SetMouseController(MouseController currentMouseController)</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00048">BuildModeController.cs:48</a></div></div>
<div class="ttc" id="class_selection_info_html_ae8b10bdd6bacc96de5d35363ea1f15dd"><div class="ttname"><a href="class_selection_info.html#ae8b10bdd6bacc96de5d35363ea1f15dd">SelectionInfo.SelectNextStuff</a></div><div class="ttdeci">void SelectNextStuff()</div><div class="ttdef"><b>Definition:</b> <a href="_selection_info_8cs_source.html#l00061">SelectionInfo.cs:61</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_a59f078dd0aa6f0cac74ced533d0b1410"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#a59f078dd0aa6f0cac74ced533d0b1410">MouseController.DragParameters.EndY</a></div><div class="ttdeci">int EndY</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00681">MouseController.cs:681</a></div></div>
<div class="ttc" id="class_mouse_controller_html"><div class="ttname"><a href="class_mouse_controller.html">MouseController</a></div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00013">MouseController.cs:13</a></div></div>
<div class="ttc" id="class_selection_info_html"><div class="ttname"><a href="class_selection_info.html">SelectionInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="_selection_info_8cs_source.html#l00012">SelectionInfo.cs:12</a></div></div>
<div class="ttc" id="class_mouse_controller_html_ad6ab2c64fc9448c083bba1dcc834a642"><div class="ttname"><a href="class_mouse_controller.html#ad6ab2c64fc9448c083bba1dcc834a642">MouseController.GetMousePosition</a></div><div class="ttdeci">Vector3 GetMousePosition()</div><div class="ttdoc">Gets the mouse position in world space. </div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00075">MouseController.cs:75</a></div></div>
<div class="ttc" id="class_mouse_controller_html_a99a99423977b205150b7f05a2701f581"><div class="ttname"><a href="class_mouse_controller.html#a99a99423977b205150b7f05a2701f581">MouseController.StartSpawnMode</a></div><div class="ttdeci">void StartSpawnMode()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00115">MouseController.cs:115</a></div></div>
<div class="ttc" id="class_furniture_manager_html_a82b6dcc693f7e66ee2cc65bfc9073efb"><div class="ttname"><a href="class_furniture_manager.html#a82b6dcc693f7e66ee2cc65bfc9073efb">FurnitureManager.IsWorkSpotClear</a></div><div class="ttdeci">bool IsWorkSpotClear(string type, Tile tile)</div><div class="ttdoc">Determines whether the work spot of the furniture with the given type at the given tile is clear...</div><div class="ttdef"><b>Definition:</b> <a href="_furniture_manager_8cs_source.html#l00136">FurnitureManager.cs:136</a></div></div>
<div class="ttc" id="class_game_controller_html_a61cb8435fc41507058b6dc08419408a2"><div class="ttname"><a href="class_game_controller.html#a61cb8435fc41507058b6dc08419408a2">GameController.IsModal</a></div><div class="ttdeci">bool IsModal</div><div class="ttdef"><b>Definition:</b> <a href="_game_controller_8cs_source.html#l00026">GameController.cs:26</a></div></div>
<div class="ttc" id="class_world_controller_html"><div class="ttname"><a href="class_world_controller.html">WorldController</a></div><div class="ttdef"><b>Definition:</b> <a href="_world_controller_8cs_source.html#l00020">WorldController.cs:20</a></div></div>
<div class="ttc" id="class_world_controller_html_a06f2556c0b263655566adb7b58bbd061"><div class="ttname"><a href="class_world_controller.html#a06f2556c0b263655566adb7b58bbd061">WorldController.SpawnInventoryController</a></div><div class="ttdeci">SpawnInventoryController SpawnInventoryController</div><div class="ttdef"><b>Definition:</b> <a href="_world_controller_8cs_source.html#l00055">WorldController.cs:55</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_a179a7474206bcddbf78d17574c1100dc"><div class="ttname"><a href="class_build_mode_controller.html#a179a7474206bcddbf78d17574c1100dc">BuildModeController.CurrentPreviewRotation</a></div><div class="ttdeci">float CurrentPreviewRotation</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00041">BuildModeController.cs:41</a></div></div>
<div class="ttc" id="class_selection_info_html_a8ae5716ce65fb768ba41c5e2b86673db"><div class="ttname"><a href="class_selection_info.html#a8ae5716ce65fb768ba41c5e2b86673db">SelectionInfo.GetSelectedStuff</a></div><div class="ttdeci">ISelectable GetSelectedStuff()</div><div class="ttdef"><b>Definition:</b> <a href="_selection_info_8cs_source.html#l00070">SelectionInfo.cs:70</a></div></div>
<div class="ttc" id="class_tile_html_a8f051217146f35f8df3f110a5408b7fe"><div class="ttname"><a href="class_tile.html#a8f051217146f35f8df3f110a5408b7fe">Tile.Z</a></div><div class="ttdeci">int Z</div><div class="ttdef"><b>Definition:</b> <a href="_tile_8cs_source.html#l00119">Tile.cs:119</a></div></div>
<div class="ttc" id="class_tile_html_a9cf9a09c5a83a5789b3302b2cd888552"><div class="ttname"><a href="class_tile.html#a9cf9a09c5a83a5789b3302b2cd888552">Tile.X</a></div><div class="ttdeci">int X</div><div class="ttdef"><b>Definition:</b> <a href="_tile_8cs_source.html#l00115">Tile.cs:115</a></div></div>
<div class="ttc" id="class_world_html_a861a1e47079f04cf1de46887f76f6177"><div class="ttname"><a href="class_world.html#a861a1e47079f04cf1de46887f76f6177">World.Width</a></div><div class="ttdeci">int Width</div><div class="ttdef"><b>Definition:</b> <a href="_world_8cs_source.html#l00094">World.cs:94</a></div></div>
<div class="ttc" id="class_utility_sprite_controller_html"><div class="ttname"><a href="class_utility_sprite_controller.html">UtilitySpriteController</a></div><div class="ttdef"><b>Definition:</b> <a href="_utility_sprite_controller_8cs_source.html#l00012">UtilitySpriteController.cs:12</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_a2beedb8a4f48ee65488038473c180b50"><div class="ttname"><a href="class_build_mode_controller.html#a2beedb8a4f48ee65488038473c180b50">BuildModeController.DoesFurnitureBuildJobOverlapExistingBuildJob</a></div><div class="ttdeci">bool DoesFurnitureBuildJobOverlapExistingBuildJob(Tile t, string furnitureType, float rotation=0)</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00393">BuildModeController.cs:393</a></div></div>
<div class="ttc" id="class_world_html_afd8c3d504d1170f5c99b20162fc25a0e"><div class="ttname"><a href="class_world.html#afd8c3d504d1170f5c99b20162fc25a0e">World.FurnitureManager</a></div><div class="ttdeci">FurnitureManager FurnitureManager</div><div class="ttdoc">Gets the furniture manager. </div><div class="ttdef"><b>Definition:</b> <a href="_world_8cs_source.html#l00124">World.cs:124</a></div></div>
<div class="ttc" id="class_furniture_html_acde3e7f9d40af5b75c441d53778a3fe2"><div class="ttname"><a href="class_furniture.html#acde3e7f9d40af5b75c441d53778a3fe2">Furniture.Jobs</a></div><div class="ttdeci">BuildableJobs Jobs</div><div class="ttdoc">Gets a component that handles the jobs linked to the furniture. </div><div class="ttdef"><b>Definition:</b> <a href="_furniture_8cs_source.html#l00376">Furniture.cs:376</a></div></div>
<div class="ttc" id="class_world_controller_html_a16578baf61da3e9d18e543280d2b1f86"><div class="ttname"><a href="class_world_controller.html#a16578baf61da3e9d18e543280d2b1f86">WorldController.CameraController</a></div><div class="ttdeci">CameraController CameraController</div><div class="ttdef"><b>Definition:</b> <a href="_world_controller_8cs_source.html#l00053">WorldController.cs:53</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_aa620197e5c734a99c82568cac44b75c2"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#aa620197e5c734a99c82568cac44b75c2">MouseController.DragParameters.StartX</a></div><div class="ttdeci">int StartX</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00675">MouseController.cs:675</a></div></div>
<div class="ttc" id="class_utility_sprite_controller_html_a3f73139fa127ad921d1deaddd23fc011"><div class="ttname"><a href="class_utility_sprite_controller.html#a3f73139fa127ad921d1deaddd23fc011">UtilitySpriteController.GetSpriteForUtility</a></div><div class="ttdeci">Sprite GetSpriteForUtility(string objectType)</div><div class="ttdef"><b>Definition:</b> <a href="_utility_sprite_controller_8cs_source.html#l00041">UtilitySpriteController.cs:41</a></div></div>
<div class="ttc" id="class_mouse_controller_html_ac9b2f0fae750d7128123db59fe99c6d5"><div class="ttname"><a href="class_mouse_controller.html#ac9b2f0fae750d7128123db59fe99c6d5">MouseController.Update</a></div><div class="ttdeci">void Update()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00121">MouseController.cs:121</a></div></div>
<div class="ttc" id="class_furniture_html"><div class="ttname"><a href="class_furniture.html">Furniture</a></div><div class="ttdoc">InstalledObjects are things like walls, doors, and furniture (e.g. a sofa). </div><div class="ttdef"><b>Definition:</b> <a href="_furniture_8cs_source.html#l00029">Furniture.cs:29</a></div></div>
<div class="ttc" id="class_time_manager_html_a084a70cfad60b39d423fe1113ae3f62f"><div class="ttname"><a href="class_time_manager.html#a084a70cfad60b39d423fe1113ae3f62f">TimeManager.EveryFrameNotModal</a></div><div class="ttdeci">Action&lt; float &gt; EveryFrameNotModal</div><div class="ttdoc">Systems that update every frame not in Modal. </div><div class="ttdef"><b>Definition:</b> <a href="_time_manager_8cs_source.html#l00071">TimeManager.cs:71</a></div></div>
<div class="ttc" id="class_prototype_manager_html"><div class="ttname"><a href="class_prototype_manager.html">PrototypeManager</a></div><div class="ttdoc">A class that holds the Prototype Maps of each entity that requires it. </div><div class="ttdef"><b>Definition:</b> <a href="_prototype_manager_8cs_source.html#l00017">PrototypeManager.cs:17</a></div></div>
<div class="ttc" id="class_mouse_controller_1_1_drag_parameters_html_a175944afab130905b4357e06132a7026"><div class="ttname"><a href="class_mouse_controller_1_1_drag_parameters.html#a175944afab130905b4357e06132a7026">MouseController.DragParameters.StartY</a></div><div class="ttdeci">int StartY</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00679">MouseController.cs:679</a></div></div>
<div class="ttc" id="class_world_html_a611a474efcbf8859dc219c66e667abb4"><div class="ttname"><a href="class_world.html#a611a474efcbf8859dc219c66e667abb4">World.Current</a></div><div class="ttdeci">static World Current</div><div class="ttdef"><b>Definition:</b> <a href="_world_8cs_source.html#l00091">World.cs:91</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_a002aef1314c097a269c18c5b2e153b56"><div class="ttname"><a href="class_build_mode_controller.html#a002aef1314c097a269c18c5b2e153b56">BuildModeController.BuildModeType</a></div><div class="ttdeci">string BuildModeType</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00045">BuildModeController.cs:45</a></div></div>
<div class="ttc" id="class_mouse_controller_html_a3ef7887060eaa7a7320c5432a395e923"><div class="ttname"><a href="class_mouse_controller.html#a3ef7887060eaa7a7320c5432a395e923">MouseController.IsCharacterSelected</a></div><div class="ttdeci">bool IsCharacterSelected()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00144">MouseController.cs:144</a></div></div>
<div class="ttc" id="class_game_controller_html"><div class="ttname"><a href="class_game_controller.html">GameController</a></div><div class="ttdef"><b>Definition:</b> <a href="_game_controller_8cs_source.html#l00013">GameController.cs:13</a></div></div>
<div class="ttc" id="_build_mode_controller_8cs_html_a9c6873c2efeb065f633a16b39a5841bd"><div class="ttname"><a href="_build_mode_controller_8cs.html#a9c6873c2efeb065f633a16b39a5841bd">BuildMode</a></div><div class="ttdeci">BuildMode</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00014">BuildModeController.cs:14</a></div></div>
<div class="ttc" id="class_mouse_controller_html_aa38db8a75d9e6875bbc574588b26ac41"><div class="ttname"><a href="class_mouse_controller.html#aa38db8a75d9e6875bbc574588b26ac41">MouseController.StartBuildMode</a></div><div class="ttdeci">void StartBuildMode()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00110">MouseController.cs:110</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_acc5df17b8a7f94448334cf7e5a414b5b"><div class="ttname"><a href="class_build_mode_controller.html#acc5df17b8a7f94448334cf7e5a414b5b">BuildModeController.DoBuild</a></div><div class="ttdeci">void DoBuild(Tile tile)</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00143">BuildModeController.cs:143</a></div></div>
<div class="ttc" id="class_time_manager_html"><div class="ttname"><a href="class_time_manager.html">TimeManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_time_manager_8cs_source.html#l00017">TimeManager.cs:17</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_a701cb5c8326af048f78a511cf7c1c190"><div class="ttname"><a href="class_build_mode_controller.html#a701cb5c8326af048f78a511cf7c1c190">BuildModeController.DoesUtilityBuildJobOverlapExistingBuildJob</a></div><div class="ttdeci">bool DoesUtilityBuildJobOverlapExistingBuildJob(string utilityType, Tile tile)</div><div class="ttdoc">Does the utility build job overlap an existing utility build job of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00427">BuildModeController.cs:427</a></div></div>
<div class="ttc" id="class_camera_controller_html_a2ca9b5b3b41679613229d313a22243d2"><div class="ttname"><a href="class_camera_controller.html#a2ca9b5b3b41679613229d313a22243d2">CameraController.CurrentLayer</a></div><div class="ttdeci">int CurrentLayer</div><div class="ttdef"><b>Definition:</b> <a href="_camera_controller_8cs_source.html#l00070">CameraController.cs:70</a></div></div>
<div class="ttc" id="class_build_mode_controller_html"><div class="ttname"><a href="class_build_mode_controller.html">BuildModeController</a></div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00024">BuildModeController.cs:24</a></div></div>
<div class="ttc" id="class_mouse_controller_html_ac4180c166ce9084e0f817ab7e7f930fd"><div class="ttname"><a href="class_mouse_controller.html#ac4180c166ce9084e0f817ab7e7f930fd">MouseController.mySelection</a></div><div class="ttdeci">SelectionInfo mySelection</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00015">MouseController.cs:15</a></div></div>
<div class="ttc" id="class_furniture_html_a20ab8b51ecf342cf0463482bf2816de4"><div class="ttname"><a href="class_furniture.html#a20ab8b51ecf342cf0463482bf2816de4">Furniture.Type</a></div><div class="ttdeci">string Type</div><div class="ttdoc">Gets the string that defines the type of object the furniture is. This gets queried by the visual sys...</div><div class="ttdef"><b>Definition:</b> <a href="_furniture_8cs_source.html#l00280">Furniture.cs:280</a></div></div>
<div class="ttc" id="class_game_controller_html_abe6246464a3deffea7bac0356478ba89"><div class="ttname"><a href="class_game_controller.html#abe6246464a3deffea7bac0356478ba89">GameController.Instance</a></div><div class="ttdeci">static GameController Instance</div><div class="ttdef"><b>Definition:</b> <a href="_game_controller_8cs_source.html#l00019">GameController.cs:19</a></div></div>
<div class="ttc" id="class_selection_info_html_a184257ca4a6f7d0c9e60c8815d8c4b72"><div class="ttname"><a href="class_selection_info.html#a184257ca4a6f7d0c9e60c8815d8c4b72">SelectionInfo.BuildStuffInTile</a></div><div class="ttdeci">void BuildStuffInTile()</div><div class="ttdef"><b>Definition:</b> <a href="_selection_info_8cs_source.html#l00031">SelectionInfo.cs:31</a></div></div>
<div class="ttc" id="class_build_mode_controller_html_ac6fdada4acb0019086133d0a14f588d5"><div class="ttname"><a href="class_build_mode_controller.html#ac6fdada4acb0019086133d0a14f588d5">BuildModeController.BuildMode</a></div><div class="ttdeci">BuildMode BuildMode</div><div class="ttdef"><b>Definition:</b> <a href="_build_mode_controller_8cs_source.html#l00043">BuildModeController.cs:43</a></div></div>
<div class="ttc" id="namespace_unity_engine_html"><div class="ttname"><a href="namespace_unity_engine.html">UnityEngine</a></div></div>
<div class="ttc" id="class_mouse_controller_html_afebdeed6462eccd639e5799851597c14"><div class="ttname"><a href="class_mouse_controller.html#afebdeed6462eccd639e5799851597c14">MouseController.GetCurrentMode</a></div><div class="ttdeci">MouseMode GetCurrentMode()</div><div class="ttdef"><b>Definition:</b> <a href="_mouse_controller_8cs_source.html#l00085">MouseController.cs:85</a></div></div>
<div class="ttc" id="class_furniture_sprite_controller_html_a28c4198ec62f455ece7489a0c40b9cc9"><div class="ttname"><a href="class_furniture_sprite_controller.html#a28c4198ec62f455ece7489a0c40b9cc9">FurnitureSpriteController.GetSpriteForFurniture</a></div><div class="ttdeci">Sprite GetSpriteForFurniture(string type)</div><div class="ttdef"><b>Definition:</b> <a href="_furniture_sprite_controller_8cs_source.html#l00067">FurnitureSpriteController.cs:67</a></div></div>
<div class="ttc" id="class_sprite_manager_html"><div class="ttname"><a href="class_sprite_manager.html">SpriteManager</a></div><div class="ttdoc">Sprite Manager isn&amp;#39;t responsible for actually creating GameObjects. That is going to be the job of th...</div><div class="ttdef"><b>Definition:</b> <a href="_sprite_manager_8cs_source.html#l00020">SpriteManager.cs:20</a></div></div>
<div class="ttc" id="class_selection_info_html_ad0fa265814f54128149cf7fa09fbdef3"><div class="ttname"><a href="class_selection_info.html#ad0fa265814f54128149cf7fa09fbdef3">SelectionInfo.IsCharacterSelected</a></div><div class="ttdeci">bool IsCharacterSelected()</div><div class="ttdef"><b>Definition:</b> <a href="_selection_info_8cs_source.html#l00075">SelectionInfo.cs:75</a></div></div>
<div class="ttc" id="class_world_controller_html_ad2ac06d87936d4b4cdaab4bef1107feb"><div class="ttname"><a href="class_world_controller.html#ad2ac06d87936d4b4cdaab4bef1107feb">WorldController.GetTileAtWorldCoord</a></div><div class="ttdeci">Tile GetTileAtWorldCoord(Vector3 coord)</div><div class="ttdoc">Gets the tile at the Unity-space coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="_world_controller_8cs_source.html#l00181">WorldController.cs:181</a></div></div>
<div class="ttc" id="class_utility_html_aef8d5581e49a8841dbd15f9d0f6b6c3c"><div class="ttname"><a href="class_utility.html#aef8d5581e49a8841dbd15f9d0f6b6c3c">Utility.UpdateGrid</a></div><div class="ttdeci">void UpdateGrid(Utility utilityToUpdate, Grid newGrid=null)</div><div class="ttdoc">Updates the grids of this utility sharing the grids along the network of connected utilities...</div><div class="ttdef"><b>Definition:</b> <a href="_utility_8cs_source.html#l00598">Utility.cs:598</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f243a7a7d497212ea32570f02ce73440.html">Workspace</a></li><li class="navelem"><a class="el" href="dir_92ac071e2590783cb7caca7d9b628033.html">Porcupine</a></li><li class="navelem"><a class="el" href="dir_7104a0e4e3bd57a4d9b588bf838dfe29.html">ProjectPorcupine</a></li><li class="navelem"><a class="el" href="dir_173c24a531980a642061a24f61ed097f.html">Assets</a></li><li class="navelem"><a class="el" href="dir_d1fe990f965bc777ac4b048ee0a5896b.html">Scripts</a></li><li class="navelem"><a class="el" href="dir_b31b8027737d3d5aa8e199b88f56ed36.html">Controllers</a></li><li class="navelem"><a class="el" href="dir_d3d1b061b72ca4d600488014f1e02c47.html">InputOutput</a></li><li class="navelem"><a class="el" href="_mouse_controller_8cs.html">MouseController.cs</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
